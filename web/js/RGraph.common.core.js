
window.RGraph=window.RGraph||{isrgraph:true,isRGraph:true,rgraph:true};(function(win,doc,undefined)
{var ua=navigator.userAgent;RGraph.Highlight={};RGraph.Registry={};RGraph.Registry.store=[];RGraph.Registry.store['event.handlers']=[];RGraph.Registry.store['__rgraph_event_listeners__']=[];RGraph.Background={};RGraph.background={};RGraph.objects=[];RGraph.Resizing={};RGraph.events=[];RGraph.cursor=[];RGraph.Effects=RGraph.Effects||{};RGraph.cache=[];RGraph.ObjectRegistry={};RGraph.ObjectRegistry.objects={};RGraph.ObjectRegistry.objects.byUID=[];RGraph.ObjectRegistry.objects.byCanvasID=[];RGraph.OR=RGraph.ObjectRegistry;RGraph.PI=Math.PI;RGraph.HALFPI=RGraph.PI/2;RGraph.TWOPI=RGraph.PI*2;RGraph.ISFF=ua.indexOf('Firefox')!=-1;RGraph.ISOPERA=ua.indexOf('Opera')!=-1;RGraph.ISCHROME=ua.indexOf('Chrome')!=-1;RGraph.ISSAFARI=ua.indexOf('Safari')!=-1&&!RGraph.ISCHROME;RGraph.ISWEBKIT=ua.indexOf('WebKit')!=-1;RGraph.ISIE=ua.indexOf('Trident')>0||navigator.userAgent.indexOf('MSIE')>0;RGraph.ISIE6=ua.indexOf('MSIE 6')>0;RGraph.ISIE7=ua.indexOf('MSIE 7')>0;RGraph.ISIE8=ua.indexOf('MSIE 8')>0;RGraph.ISIE9=ua.indexOf('MSIE 9')>0;RGraph.ISIE10=ua.indexOf('MSIE 10')>0;RGraph.ISOLD=RGraph.ISIE6||RGraph.ISIE7||RGraph.ISIE8;RGraph.ISIE11UP=ua.indexOf('MSIE')==-1&&ua.indexOf('Trident')>0;RGraph.ISIE10UP=RGraph.ISIE10||RGraph.ISIE11UP;RGraph.ISIE9UP=RGraph.ISIE9||RGraph.ISIE10UP;RGraph.getArgs=function(args,names)
{var ret={};var count=0;names=names.trim().split(/ *, */);if(args&&args[0]&&args.length===1&&typeof args[0][names[0]]!=='undefined'){for(var i=0;i<names.length;++i){if(typeof args[0][names[i]]==='undefined'){args[0][names[i]]=null;}}
return args[0];}else{for(var i in names){ret[names[i]]=typeof args[count]==='undefined'?null:args[count];count+=1;}}
return ret;};RGraph.getScale=function(args)
{var prop=args.object.properties,numlabels=typeof args.options['scale.labels.count']=='number'?args.options['scale.labels.count']:5,units_pre=typeof args.options['scale.units.pre']=='string'?args.options['scale.units.pre']:'',units_post=typeof args.options['scale.units.post']=='string'?args.options['scale.units.post']:'',max=Number(args.options['scale.max']),min=typeof args.options['scale.min']=='number'?args.options['scale.min']:0,strict=args.options['scale.strict'],decimals=Number(args.options['scale.decimals']),point=args.options['scale.point'],thousand=args.options['scale.thousand'],original_max=max,round=args.options['scale.round'],scale={max:1,labels:[],values:[]},formatter=args.options['scale.formatter'];prefix=args.object.type==='hbar'?'xaxis':'yaxis';prefix=args.object.type==='odo'?'':prefix;if(!max){var max=1;for(var i=0;i<numlabels;++i){var label=((((max-min)/numlabels)+min)*(i+1)).toFixed(decimals);scale.labels.push(units_pre+label+units_post);scale.values.push(parseFloat(label))}}else if(max<=1&&!strict){var arr=[1,0.5,0.10,0.05,0.010,0.005,0.0010,0.0005,0.00010,0.00005,0.000010,0.000005,0.0000010,0.0000005,0.00000010,0.00000005,0.000000010,0.000000005,0.0000000010,0.0000000005,0.00000000010,0.00000000005,0.000000000010,0.000000000005,0.0000000000010,0.0000000000005],vals=[];for(var i=0;i<arr.length;++i){if(max>arr[i]){i--;break;}}
scale.max=arr[i]
scale.labels=[];scale.values=[];for(var j=0;j<numlabels;++j){var value=((((arr[i]-min)/numlabels)*(j+1))+min).toFixed(decimals);scale.values.push(value);scale.labels.push(RGraph.numberFormat({object:args.object,number:value,unitspre:units_pre,unitspost:units_post,thousand:thousand,point:point,formatter:formatter,decimals:decimals}));}}else if(!strict){max=Math.ceil(max);var interval=Math.pow(10,Math.max(1,Number(String(Number(max)-Number(min)).length-1)));var topValue=interval;while(topValue<max){topValue+=(interval/2);}
if(Number(original_max)>Number(topValue)){topValue+=(interval/2);}
if(max<=10){topValue=(Number(original_max)<=5?5:10);}
if(args.object&&typeof round=='boolean'&&round){topValue=10*interval;}
scale.max=topValue;var tmp_point=prop[prefix+'ScalePoint'];var tmp_thousand=prop[prefix+'ScaleThousand'];args.object.set(prefix+'scaleThousand',thousand);args.object.set(prefix+'scalePoint',point);for(var i=0;i<numlabels;++i){scale.labels.push(RGraph.numberFormat({object:args.object,number:((((i+1)/numlabels)*(topValue-min))+min).toFixed(decimals),unitspre:units_pre,unitspost:units_post,point:point,thousand:thousand,formatter:formatter}));scale.values.push(((((i+1)/numlabels)*(topValue-min))+min).toFixed(decimals));}
args.object.set(prefix+'scaleThousand',tmp_thousand);args.object.set(prefix+'scalePoint',tmp_point);}else if(typeof max=='number'&&strict){for(var i=0;i<numlabels;++i){scale.labels.push(RGraph.numberFormat({object:args.object,number:((((i+1)/numlabels)*(max-min))+min).toFixed(decimals),unitspre:units_pre,unitspost:units_post,thousand:thousand,point:point,formatter:formatter}));scale.values.push(((((i+1)/numlabels)*(max-min))+min).toFixed(decimals));}
scale.max=max;}
scale.units_pre=units_pre;scale.units_post=units_post;scale.point=point;scale.decimals=decimals;scale.thousand=thousand;scale.numlabels=numlabels;scale.round=Boolean(round);scale.min=min;scale.formatter=formatter;for(var i=0;i<scale.values.length;++i){scale.values[i]=parseFloat(scale.values[i]);}
return scale;};RGraph.parseJSONGradient=function(args)
{var obj=args.object,def=args.def,context=args.object.context;def=eval("("+def+")");if(typeof def.r1==='number'&&typeof def.r2==='number'){var grad=context.createRadialGradient(def.x1,def.y1,def.r1,def.x2,def.y2,def.r2);}else{var grad=context.createLinearGradient(def.x1,def.y1,def.x2,def.y2);}
var diff=1/(def.colors.length-1);grad.addColorStop(0,RGraph.trim(def.colors[0]));for(var j=1,len=def.colors.length;j<len;++j){grad.addColorStop(j*diff,RGraph.trim(def.colors[j]));}
return grad;};RGraph.arrayInvert=function()
{var args=RGraph.getArgs(arguments,'array');for(var i=0,len=args.array.length;i<len;++i){args.array[i]=!args.array[i];}
return args.array;};RGraph.arrayTrim=function()
{var args=RGraph.getArgs(arguments,'array');var out=[],content=false;for(var i=0;i<args.array.length;i++){if(args.array[i]){content=true;}
if(content){out.push(args.array[i]);}}
out=RGraph.arrayReverse(out);var out2=[],content=false;for(var i=0;i<out.length;i++){if(out[i]){content=true;}
if(content){out2.push(out[i]);}}
out2=RGraph.arrayReverse(out2);return out2;};RGraph.arrayClone=function()
{var args=RGraph.getArgs(arguments,'array');if(args.array===null||typeof args.array!=='object'){return args.array;}
var temp=RGraph.isArray(args.array)?[]:{};for(var i in args.array){if(typeof i==='string'||typeof i==='number'){if(typeof args.array[i]==='number'){temp[i]=(function(arg){return Number(arg);})(args.array[i]);}else if(typeof args.array[i]==='string'){temp[i]=(function(arg){return String(arg);})(args.array[i]);}else if(typeof args.array[i]==='function'){temp[i]=args.array[i];}else{temp[i]=RGraph.arrayClone(args.array[i]);}}}
return temp;};RGraph.arrayMax=function()
{var args=RGraph.getArgs(arguments,'array,ignore');var max=null;if(typeof args.array==='number'){return args.array;}
if(RGraph.isNull(args.array)){return 0;}
for(var i=0,len=args.array.length;i<len;++i){if(typeof args.array[i]==='number'&&!isNaN(args.array[i])){var val=args.ignore?Math.abs(args.array[i]):args.array[i];if(typeof max==='number'){max=Math.max(max,val);}else{max=val;}}}
return max;};RGraph.arrayMin=function(args)
{var args=RGraph.getArgs(arguments,'array,ignore');var max=null,min=null,ma=Math;if(typeof args.array==='number'){return args.array;}
if(RGraph.isNull(args.array)){return 0;}
for(var i=0,len=args.array.length;i<len;++i){if(typeof args.array[i]==='number'){var val=args.ignore?Math.abs(args.array[i]):args.array[i];if(typeof min==='number'){min=Math.min(min,val);}else{min=val;}}}
return min;};RGraph.arrayPad=function()
{var args=RGraph.getArgs(arguments,'array,length,value');if(args.array.length<args.length){for(var i=args.array.length;i<args.length;i+=1){args.array[i]=args.value;}}
return args.array;};RGraph.arraySum=function()
{var args=RGraph.getArgs(arguments,'array');if(typeof args.array==='number'){return args.array;}
if(RGraph.isNull(args.array)){return 0;}
var i,sum,len=args.array.length;for(i=0,sum=0;i<len;sum+=(args.array[i++]||0));return sum;};RGraph.arrayLinearize=function()
{var arr=[],args=arguments
for(var i=0,len=args.length;i<len;++i){if(typeof args[i]==='object'&&args[i]){for(var j=0,len2=args[i].length;j<len2;++j){var sub=RGraph.arrayLinearize(args[i][j]);for(var k=0,len3=sub.length;k<len3;++k){arr.push(sub[k]);}}}else{arr.push(args[i]);}}
return arr;};RGraph.arrayShift=function()
{var args=RGraph.getArgs(arguments,'array');var ret=[];for(var i=1,len=args.array.length;i<len;++i){ret.push(args.array[i]);}
return ret;};RGraph.arrayReverse=function()
{var args=RGraph.getArgs(arguments,'array');if(!args.array){return;}
var newarr=[];for(var i=args.array.length-1;i>=0;i-=1){newarr.push(args.array[i]);}
return newarr;};RGraph.abs=function()
{var args=RGraph.getArgs(arguments,'value');if(typeof args.value==='string'){args.value=parseFloat(args.value)||0;}
if(typeof args.value==='number'){return Math.abs(args.value);}
if(typeof args.value==='object'){for(i in args.value){if(typeof args.value[i]==='string'||typeof args.value[i]==='number'||typeof args.value[i]==='object'){args.value[i]=RGraph.abs(args.value[i]);}}
return args.value;}
return 0;};RGraph.clear=RGraph.Clear=function(args)
{var args=RGraph.getArgs(arguments,'canvas,color');var obj=args.canvas.__object__;var context=args.canvas.getContext('2d');var color=args.color||(obj&&obj.get('clearto'));if(!args.canvas){return;}
RGraph.fireCustomEvent(obj,'onbeforeclear');if(RGraph.text.domNodeCache&&RGraph.text.domNodeCache[args.canvas.id]){for(var i in RGraph.text.domNodeCache[args.canvas.id]){var el=RGraph.text.domNodeCache[args.canvas.id][i];if(el&&el.style){el.style.display='none';}}}
if(!color||(color&&color==='rgba(0,0,0,0)'||color==='transparent')){context.clearRect(-100,-100,args.canvas.width+200,args.canvas.height+200);context.globalCompositeOperation='source-over';}else if(color){obj.path('fs % fr -100 -100 % %',color,args.canvas.width+200,args.canvas.height+200);}else{obj.path('fs % fr -100 -100 % %',obj.get('clearto'),args.canvas.width+200,args.canvas.height+200);}
if(RGraph.Registry.get('background.image.'+args.canvas.id)){var img=RGraph.Registry.get('background.image.'+args.canvas.id);img.style.position='absolute';img.style.left='-10000px';img.style.top='-10000px';}
if(RGraph.Registry.get('tooltip')&&obj&&!obj.get('tooltipsNohideonclear')){RGraph.hideTooltip(args.canvas);}
args.canvas.style.cursor='default';RGraph.fireCustomEvent(obj,'onclear');};RGraph.drawTitle=function()
{var args=RGraph.getArgs(arguments,'object,text,marginTop,centerx');var canvas=args.object.canvas,context=args.object.context,prop=args.object.properties,marginLeft=prop.marginLeft,marginRight=prop.marginRight,marginTop=args.marginTop,marginBottom=prop.marginBottom,centerx=(args.centerx?args.centerx:((canvas.width-marginLeft-marginRight)/2)+marginLeft),keypos=prop.keyPosition,vpos=prop.titleVpos,hpos=prop.titleHpos,bgcolor=prop.titleBackground,x=prop.titleX,y=prop.titleY,halign='center',valign='center',textConf=RGraph.getTextConf({object:args.object,prefix:'title'});var size=textConf.size,bold=textConf.bold,italic=textConf.italic;if(RGraph.isNull(bold)){textConf.bold=true;bold=true;}
if(args.object.type=='bar'&&prop.variant=='3d'){keypos='margin';}
context.beginPath();context.fillStyle=textConf.color?textConf.color:'black';if(keypos&&keypos!='margin'){var valign='center';}else if(!keypos){var valign='center';}else{var valign='bottom';}
if(typeof prop.titleVpos==='number'){vpos=prop.titleVpos*marginTop;if(prop.xaxisPosition==='top'){vpos=prop.titleVpos*marginBottom+marginTop+(canvas.height-marginTop-marginBottom);}}else{vpos=marginTop-size-5;if(prop.xaxisPosition==='top'){vpos=canvas.height-marginBottom+size+5;}}
if(typeof hpos==='number'){centerx=hpos*canvas.width;}
if(typeof x==='number')centerx=x;if(typeof y==='number')vpos=y;if(typeof x==='string')centerx+=parseFloat(x);if(typeof y==='string')vpos+=parseFloat(y);if(typeof prop.titleHalign==='string'){halign=prop.titleHalign;}
if(typeof prop.titleValign==='string'){valign=prop.titleValign;}
if(typeof textConf.color!==null){var oldColor=context.fillStyle,newColor=textConf.color;context.fillStyle=newColor?newColor:'black';}
var ret=RGraph.text({object:args.object,font:textConf.font,size:textConf.size,color:textConf.color,bold:textConf.bold,italic:textConf.italic,x:centerx,y:vpos,text:args.text,valign:valign,halign:halign,bounding:bgcolor!=null,'bounding.fill':bgcolor,tag:'title',marker:false});context.fillStyle=oldColor;};RGraph.getMouseXY=function()
{var args=RGraph.getArgs(arguments,'event');if(!args.event.target){return;}
var el=args.event.target,canvas=el,caStyle=canvas.style,offsetX=0,offsetY=0,x,y,borderLeft=parseInt(caStyle.borderLeftWidth)||0,borderTop=parseInt(caStyle.borderTopWidth)||0,paddingLeft=parseInt(caStyle.paddingLeft)||0,paddingTop=parseInt(caStyle.paddingTop)||0,additionalX=borderLeft+paddingLeft,additionalY=borderTop+paddingTop;if(typeof args.event.offsetX==='number'&&typeof args.event.offsetY==='number'){if(!RGraph.ISIE&&!RGraph.ISOPERA){x=args.event.offsetX-borderLeft-paddingLeft;y=args.event.offsetY-borderTop-paddingTop;}else if(RGraph.ISIE){x=args.event.offsetX-paddingLeft;y=args.event.offsetY-paddingTop;}else{x=args.event.offsetX;y=args.event.offsetY;}}else{if(typeof el.offsetParent!=='undefined'){do{offsetX+=el.offsetLeft;offsetY+=el.offsetTop;}while((el=el.offsetParent));}
x=args.event.pageX-offsetX-additionalX;y=args.event.pageY-offsetY-additionalY;x-=(2*(parseInt(document.body.style.borderLeftWidth)||0));y-=(2*(parseInt(document.body.style.borderTopWidth)||0));}
return[x,y];};RGraph.getCanvasXY=function()
{var args=RGraph.getArgs(arguments,'canvas');var x=0;var y=0;var el=args.canvas;do{x+=el.offsetLeft;y+=el.offsetTop;if(el.tagName.toLowerCase()=='table'&&(RGraph.ISCHROME||RGraph.ISSAFARI)){x+=parseInt(el.border)||0;y+=parseInt(el.border)||0;}
el=el.offsetParent;}while(el&&el.tagName.toLowerCase()!='body');var paddingLeft=args.canvas.style.paddingLeft?parseInt(args.canvas.style.paddingLeft):0;var paddingTop=args.canvas.style.paddingTop?parseInt(args.canvas.style.paddingTop):0;var borderLeft=args.canvas.style.borderLeftWidth?parseInt(args.canvas.style.borderLeftWidth):0;var borderTop=args.canvas.style.borderTopWidth?parseInt(args.canvas.style.borderTopWidth):0;if(navigator.userAgent.indexOf('Firefox')>0){x+=parseInt(document.body.style.borderLeftWidth)||0;y+=parseInt(document.body.style.borderTopWidth)||0;}
return[x+paddingLeft+borderLeft,y+paddingTop+borderTop];};RGraph.isFixed=function()
{var args=RGraph.getArgs(arguments,'canvas');var i=0;while(args.canvas&&args.canvas.tagName.toLowerCase()!='body'&&i<99){if(args.canvas.style.position=='fixed'){return args.canvas;}
args.canvas=args.canvas.offsetParent;}
return false;};RGraph.register=function()
{var args=RGraph.getArgs(arguments,'object');if(!args.object.get('noregister')&&args.object.get('register')!==false){RGraph.ObjectRegistry.add(args.object);args.object.set('register',false);}};RGraph.redraw=function()
{var args=RGraph.getArgs(arguments,'color');var objectRegistry=RGraph.ObjectRegistry.objects.byCanvasID;var tags=document.getElementsByTagName('canvas');for(var i=0,len=tags.length;i<len;++i){if(tags[i]&&tags[i].__object__&&tags[i].__object__.isrgraph){if(!tags[i].noclear){RGraph.clear(tags[i],args.color?args.color:null);}}}
for(var i=0,len=objectRegistry.length;i<len;++i){if(objectRegistry[i]){var id=objectRegistry[i][0];objectRegistry[i][1].draw();}}};RGraph.redrawCanvas=function()
{var args=RGraph.getArgs(arguments,'canvas,clear,color');var objects=RGraph.ObjectRegistry.getObjectsByCanvasID(args.canvas.id);if(RGraph.isNull(args.clear)||(typeof args.clear==='boolean'&&args.clear!==false)){var color=args.color||args.canvas.__object__.get('clearto')||'transparent';RGraph.clear(args.canvas,args.color);}
for(var i=0,len=objects.length;i<len;++i){if(objects[i]){if(objects[i]&&objects[i].isrgraph){objects[i].draw();}}}};RGraph.Background.draw=function()
{var args=RGraph.getArgs(arguments,'object');var prop=args.object.properties,height=0,marginLeft=args.object.marginLeft,marginRight=args.object.marginRight,marginTop=args.object.marginTop,marginBottom=args.object.marginBottom,variant=prop.variant
args.object.context.fillStyle=prop.textColor;if(variant=='3d'){args.object.context.save();args.object.context.translate(prop.variantThreedOffsetx,-1*prop.variantThreedOffsety);}
if(args.object.type!=='bar'&&args.object.type!=='waterfall'&&args.object.type!=='hbar'&&args.object.type!=='line'&&args.object.type!=='gantt'&&args.object.type!=='scatter'&&typeof prop.xaxisTitle==='string'&&prop.xaxisTitle.length){var size=prop.textSize+2;var hpos=((args.object.canvas.width-marginLeft-marginRight)/2)+marginLeft;var vpos=args.object.canvas.height-marginBottom+25;if(typeof prop.xaxisTitlePos==='number'){vpos=args.object.canvas.height-(marginBottom*prop.xaxisTitlePos);}
if(typeof prop.xaxisTitleX==='number'){hpos=prop.xaxisTitleX;}
if(typeof prop.xaxisTitleY==='number'){vpos=prop.xaxisTitleY;}
var textConf=RGraph.getTextConf({object:args.object,prefix:'xaxisTitle'});RGraph.text({object:args.object,font:textConf.font,size:textConf.size,color:textConf.color,bold:textConf.bold,italic:textConf.italic,x:hpos,y:vpos,text:prop.xaxisTitle,halign:'center',valign:'top',tag:'xaxis.title'});}
if(args.object.type!=='bar'&&args.object.type!=='waterfall'&&args.object.type!=='hbar'&&args.object.type!=='line'&&args.object.type!=='gantt'&&args.object.type!=='scatter'&&typeof prop.yaxisTitle==='string'&&prop.yaxisTitle.length){var size=prop.textSize+2;var font=prop.textFont;var italic=prop.textItalic;var angle=270;var bold=prop.yaxisTitleBold;var color=prop.yaxisTitleColor;if(typeof prop.yaxisTitlePos=='number'){var yaxis_title_pos=prop.yaxisTitlePos*marginLeft;}else if(args.object.type==='hbar'&&RGraph.isNull(prop.yaxisTitlePos)){var yaxis_title_pos=prop.marginLeft-args.object.yaxisLabelsSize;}else{if(args.object&&args.object.scale2){var yaxisTitleDimensions=RGraph.measureText({text:args.object.scale2.labels[args.object.scale2.labels.length-1],bold:typeof prop.yaxisScaleBold==='boolean'?prop.yaxisScaleBold:prop.textBold,font:prop.yaxisScaleFont||prop.textFont,size:typeof prop.yaxisScaleSize==='number'?prop.yaxisScaleSize:prop.textSize});}else{yaxisTitleDimensions=[0,0];}
var yaxis_title_pos=prop.marginLeft-yaxisTitleDimensions[0]-7;}
if(typeof prop.yaxisTitleSize==='number'){size=prop.yaxisTitleSize;}
if(typeof prop.yaxisTitleItalic==='boolean'){italic=prop.yaxisTitleItalic;}
if(typeof prop.yaxisTitleFont==='string'){font=prop.yaxisTitleFont;}
if(prop.yaxisTitleAlign=='right'||prop.yaxisTitlePosition=='right'||(args.object.type==='hbar'&&prop.yaxisPosition==='right'&&typeof prop.yaxisTitleAlign==='undefined'&&typeof prop.yaxisTitlePosition==='undefined')){angle=90;yaxis_title_pos=typeof prop.yaxisTitlePos==='number'?(args.object.canvas.width-marginRight)+(prop.yaxisTitlePos*marginRight):args.object.canvas.width-marginRight+(prop.yaxisLabelsSize||prop.textSize)+10;}
var y=((args.object.canvas.height-marginTop-marginBottom)/2)+marginTop;if(typeof prop.yaxisTitleX==='number'){yaxis_title_pos=prop.yaxisTitleX;}
if(typeof prop.yaxisTitleY==='number'){y=prop.yaxisTitleY;}
args.object.context.fillStyle=color;var textConf=RGraph.getTextConf({object:args.object,prefix:'yaxisTitle'});RGraph.text({object:args.object,font:textConf.font,size:textConf.size,color:textConf.color,bold:textConf.bold,italic:textConf.italic,x:yaxis_title_pos,y:y,valign:'bottom',halign:'center',angle:angle,text:prop.yaxisTitle,tag:'yaxis.title',accessible:false});}
var bgcolor=prop.backgroundColor;if(bgcolor){args.object.context.fillStyle=bgcolor;args.object.context.fillRect(marginLeft+0.5,marginTop+0.5,args.object.canvas.width-marginLeft-marginRight,args.object.canvas.height-marginTop-marginBottom);}
var numbars=(prop.yaxisLabelsCount||5);if(typeof prop.backgroundBarsCount==='number'){numbars=prop.backgroundBarsCount;}
var barHeight=(args.object.canvas.height-marginBottom-marginTop)/numbars;args.object.context.beginPath();args.object.context.fillStyle=prop.backgroundBarsColor1;args.object.context.strokeStyle=args.object.context.fillStyle;height=(args.object.canvas.height-marginBottom);for(var i=0;i<numbars;i+=2){args.object.context.rect(marginLeft,(i*barHeight)+marginTop,args.object.canvas.width-marginLeft-marginRight,barHeight);}
args.object.context.fill();args.object.context.beginPath();args.object.context.fillStyle=prop.backgroundBarsColor2;args.object.context.strokeStyle=args.object.context.fillStyle;for(var i=1;i<numbars;i+=2){args.object.context.rect(marginLeft,(i*barHeight)+marginTop,args.object.canvas.width-marginLeft-marginRight,barHeight);}
args.object.context.fill();args.object.context.beginPath();var func=function(obj,cacheCanvas,cacheContext)
{if(prop.backgroundGrid){prop.backgroundGridHlinesCount+=0.0001;if(prop.backgroundGridAutofit){if(prop.backgroundGridAutofitAlign){if(obj.type==='hbar'){obj.set('backgroundGridHlinesCount',obj.data.length);}
if(obj.type==='line'){if(typeof prop.backgroundGridVlinesCount==='number'){}else if(prop.xaxisLabels&&prop.xaxisLabels.length){obj.set('backgroundGridVlinesCount',prop.xaxisLabels.length-1);}else{obj.set('backgroundGridVlinesCount',obj.data[0].length>0?obj.data[0].length-1:0);}}else if(obj.type==='waterfall'){obj.set('backgroundGridVlinesCount',obj.data.length+(prop.total?1:0));}else if(obj.type==='bar'){obj.set('backgroundGridVlinesCount',obj.data.length);}else if(obj.type==='scatter'){if(typeof prop.backgroundGridVlinesCount!=='number'){if(RGraph.isArray(prop.xaxisLabels)&&prop.xaxisLabels.length){obj.set('backgroundGridVlinesCount',prop.xaxisLabels.length);}else{obj.set('backgroundGridVlinesCount',10);}}}else if(obj.type==='gantt'){if(typeof obj.get('backgroundGridVlinesCount')==='number'){}else{obj.set('backgroundGridVlinesCount',prop.xaxisScaleMax);}
obj.set('backgroundGridHlinesCount',obj.data.length);}else if(obj.type==='hbar'&&RGraph.isNull(prop.backgroundGridHlinesCount)){obj.set('backgroundGridHlinesCount',obj.data.length);}}
var vsize=((cacheCanvas.width-marginLeft-marginRight))/prop.backgroundGridVlinesCount;var hsize=(cacheCanvas.height-marginTop-marginBottom)/prop.backgroundGridHlinesCount;obj.set('backgroundGridVsize',vsize);obj.set('backgroundGridHsize',hsize);}
obj.context.beginPath();cacheContext.lineWidth=prop.backgroundGridLinewidth?prop.backgroundGridLinewidth:1;cacheContext.strokeStyle=prop.backgroundGridColor;if(prop.backgroundGridDashed&&typeof cacheContext.setLineDash=='function'){cacheContext.setLineDash([3,5]);}
if(prop.backgroundGridDotted&&typeof cacheContext.setLineDash=='function'){cacheContext.setLineDash([1,3]);}
obj.context.beginPath();if(prop.backgroundGridHlines){height=(cacheCanvas.height-marginBottom)
var hsize=prop.backgroundGridHsize;for(y=marginTop;y<=height;y+=hsize){cacheContext.moveTo(marginLeft,Math.round(y));cacheContext.lineTo(args.object.canvas.width-marginRight,Math.round(y));}}
if(prop.backgroundGridVlines){var width=(cacheCanvas.width-marginRight);var vsize=prop.backgroundGridVsize;for(var x=marginLeft;Math.round(x)<=width;x+=vsize){cacheContext.moveTo(Math.round(x),marginTop);cacheContext.lineTo(Math.round(x),obj.canvas.height-marginBottom);}}
if(prop.backgroundGridBorder){cacheContext.strokeStyle=prop.backgroundGridColor;cacheContext.strokeRect(Math.round(marginLeft),Math.round(marginTop),obj.canvas.width-marginLeft-marginRight,obj.canvas.height-marginTop-marginBottom);}}
cacheContext.stroke();cacheContext.beginPath();cacheContext.closePath();}
RGraph.cachedDraw(args.object,args.object.uid+'_background',func);if(variant=='3d'){args.object.context.restore();}
if(typeof args.object.context.setLineDash=='function'){args.object.context.setLineDash([1,0]);}
args.object.context.stroke();if(typeof args.object.properties.title=='string'){var prop=args.object.properties;RGraph.drawTitle(args.object,prop.title,args.object.marginTop,null,prop.titleSize?prop.titleSize:prop.textSize+2,args.object);}};RGraph.numberFormat=function(args)
{var prop=args.object.properties;var i;var prepend=args.unitspre?String(args.unitspre):'';var append=args.unitspost?String(args.unitspost):'';var output='';var decimal='';var decimal_seperator=typeof args.point==='string'?args.point:'.';var thousand_seperator=typeof args.thousand==='string'?args.thousand:',';RegExp.$1='';var i,j;if(typeof args.formatter==='function'){return(args.formatter)(args);}
if(String(args.number).indexOf('e')>0){return String(prepend+String(args.number)+append);}
args.number=String(args.number);if(args.number.indexOf('.')>0){var tmp=args.number;args.number=args.number.replace(/\.(.*)/,'');decimal=tmp.replace(/(.*)\.(.*)/,'$2');}
var seperator=thousand_seperator;var foundPoint;for(i=(args.number.length-1),j=0;i>=0;j++,i--){var character=args.number.charAt(i);if(j%3==0&&j!=0){output+=seperator;}
output+=character;}
var rev=output;output='';for(i=(rev.length-1);i>=0;i--){output+=rev.charAt(i);}
if(output.indexOf('-'+args.thousand)==0){output='-'+output.substr(('-'+args.thousand).length);}
if(decimal.length){output=output+decimal_seperator+decimal;decimal='';RegExp.$1='';}
if(output.charAt(0)=='-'){output=output.replace(/-/,'');prepend='-'+prepend;}
output=output.replace(/^,+/,'');return prepend+output+append;};RGraph.drawBars=function()
{var args=RGraph.getArgs(arguments,'object'),prop=args.object.properties,hbars=prop.backgroundHbars;if(hbars===null){return;}
args.object.context.beginPath();for(var i=0,len=hbars.length;i<len;++i){var start=hbars[i][0];var length=hbars[i][1];var color=hbars[i][2];if(RGraph.isNull(start))start=args.object.scale2.max
if(start>args.object.scale2.max)start=args.object.scale2.max;if(RGraph.isNull(length))length=args.object.scale2.max-start;if(start+length>args.object.scale2.max)length=args.object.scale2.max-start;if(start+length<(-1*args.object.scale2.max))length=(-1*args.object.scale2.max)-start;if(prop.xaxisPosition=='center'&&start==args.object.scale2.max&&length<(args.object.scale2.max* -2)){length=args.object.scale2.max* -2;}
var x=prop.marginLeft;var y=args.object.getYCoord(start);var w=args.object.canvas.width-prop.marginLeft-prop.marginRight;var h=args.object.getYCoord(start+length)-y;if(RGraph.ISOPERA!=-1&&prop.xaxisPosition=='center'&&h<0){h*=-1;y=y-h;}
if(prop.xaxisPosition=='top'){y=args.object.canvas.height-y;h*=-1;}
args.object.context.fillStyle=color;args.object.context.fillRect(x,y,w,h);}};RGraph.drawInGraphLabels=function()
{var args=RGraph.getArgs(arguments,'object');var prop=args.object.properties,labels=prop.labelsIngraph,labels_processed=[];var fgcolor='black',bgcolor='white',direction=1;if(!labels){return;}
var textConf=RGraph.getTextConf({object:args.object,prefix:'labelsIngraph'});for(var i=0,len=labels.length;i<len;i+=1){if(typeof labels[i]==='number'){for(var j=0;j<labels[i];++j){labels_processed.push(null);}}else if(typeof labels[i]==='string'||typeof labels[i]==='object'){labels_processed.push(labels[i]);}else{labels_processed.push('');}}
RGraph.noShadow(args.object);if(labels_processed&&labels_processed.length>0){for(var i=0,len=labels_processed.length;i<len;i+=1){if(labels_processed[i]){var coords=args.object.coords[i];if(coords&&coords.length>0){var x=(args.object.type=='bar'?coords[0]+(coords[2]/2):coords[0]);var y=(args.object.type=='bar'?coords[1]+(coords[3]/2):coords[1]);var length=typeof labels_processed[i][4]==='number'?labels_processed[i][4]:25;args.object.context.beginPath();args.object.context.fillStyle='black';args.object.context.strokeStyle='black';if(args.object.type==='bar'){if(args.object.get('xaxisPosition')=='top'){length*=-1;}
if(prop.variant=='dot'){args.object.context.moveTo(Math.round(x),args.object.coords[i][1]-5);args.object.context.lineTo(Math.round(x),args.object.coords[i][1]-5-length);var text_x=Math.round(x);var text_y=args.object.coords[i][1]-5-length;}else if(prop.variant=='arrow'){args.object.context.moveTo(Math.round(x),args.object.coords[i][1]-5);args.object.context.lineTo(Math.round(x),args.object.coords[i][1]-5-length);var text_x=Math.round(x);var text_y=args.object.coords[i][1]-5-length;}else{args.object.context.arc(Math.round(x),y,2.5,0,6.28,0);args.object.context.moveTo(Math.round(x),y);args.object.context.lineTo(Math.round(x),y-length);var text_x=Math.round(x);var text_y=y-length;}
args.object.context.stroke();args.object.context.fill();}else{if(typeof labels_processed[i]=='object'&&typeof labels_processed[i][3]=='number'&&labels_processed[i][3]==-1){drawUpArrow(x,y)
var valign='top';var text_x=x;var text_y=y+5+length;}else{var text_x=x;var text_y=y-5-length;if(text_y<5&&(typeof labels_processed[i]==='string'||typeof labels_processed[i][3]==='undefined')){text_y=y+5+length;var valign='top';}
if(valign==='top'){drawUpArrow(x,y);}else{drawDownArrow(x,y);}}
args.object.context.fill();}
args.object.context.beginPath();if((typeof labels_processed[i]==='object'&&typeof labels_processed[i][1]==='string')){args.object.context.fillStyle=labels_processed[i][1];}else{args.object.context.fillStyle=prop.labelsIngraphColor;}
RGraph.text({object:args.object,font:textConf.font,size:textConf.size,color:args.object.context.fillStyle||textConf.color,bold:textConf.bold,italic:textConf.italic,x:text_x,y:text_y+(args.object.properties.textAccessible?2:0),text:(typeof labels_processed[i]==='object'&&typeof labels_processed[i][0]==='string')?labels_processed[i][0]:labels_processed[i],valign:valign||'bottom',halign:'center',bounding:true,'bounding.fill':(typeof labels_processed[i]==='object'&&typeof labels_processed[i][2]==='string')?labels_processed[i][2]:'white',tag:'labels ingraph'});args.object.context.fill();}
function drawUpArrow(x,y)
{args.object.context.moveTo(Math.round(x),y+5);args.object.context.lineTo(Math.round(x),y+5+length);args.object.context.stroke();args.object.context.beginPath();args.object.context.moveTo(Math.round(x),y+5);args.object.context.lineTo(Math.round(x)-3,y+10);args.object.context.lineTo(Math.round(x)+3,y+10);args.object.context.closePath();}
function drawDownArrow(x,y)
{args.object.context.moveTo(Math.round(x),y-5);args.object.context.lineTo(Math.round(x),y-5-length);args.object.context.stroke();args.object.context.beginPath();args.object.context.moveTo(Math.round(x),y-5);args.object.context.lineTo(Math.round(x)-3,y-10);args.object.context.lineTo(Math.round(x)+3,y-10);args.object.context.closePath();}
valign=undefined;}}}};RGraph.hideCrosshairCoords=function()
{var div=RGraph.Registry.get('coordinates.coords.div');if(div&&div.style.opacity==1&&div.__object__.get('crosshairsCoordsFadeout')){var style=RGraph.Registry.get('coordinates.coords.div').style;setTimeout(function(){style.opacity=0.9;},25);setTimeout(function(){style.opacity=0.8;},50);setTimeout(function(){style.opacity=0.7;},75);setTimeout(function(){style.opacity=0.6;},100);setTimeout(function(){style.opacity=0.5;},125);setTimeout(function(){style.opacity=0.4;},150);setTimeout(function(){style.opacity=0.3;},175);setTimeout(function(){style.opacity=0.2;},200);setTimeout(function(){style.opacity=0.1;},225);setTimeout(function(){style.opacity=0;},250);setTimeout(function(){style.display='none';},275);}};RGraph.draw3DAxes=function()
{var args=RGraph.getArgs(arguments,'object');var prop=args.object.properties;var marginLeft=args.object.marginLeft,marginRight=args.object.marginRight,marginTop=args.object.marginTop,marginBottom=args.object.marginBottom,xaxispos=prop.xaxisPosition,graphArea=args.object.canvas.height-marginTop-marginBottom,halfGraphArea=graphArea/2,offsetx=prop.variantThreedOffsetx,offsety=prop.variantThreedOffsety,xaxis=prop.variantThreedXaxis,yaxis=prop.variantThreedYaxis
if(yaxis){RGraph.draw3DYAxis(args.object);}
if(xaxis){if(xaxispos==='center'){args.object.path('b m % % l % % l % % l % % c s #aaa f #ddd',marginLeft,marginTop+halfGraphArea,marginLeft+offsetx,marginTop+halfGraphArea-offsety,args.object.canvas.width-marginRight+offsetx,marginTop+halfGraphArea-offsety,args.object.canvas.width-marginRight,marginTop+halfGraphArea);}else{if(args.object.type==='hbar'){var xaxisYCoord=args.object.canvas.height-args.object.properties.marginBottom;}else{var xaxisYCoord=args.object.getYCoord(0);}
args.object.path('m % % l % % l % % l % % c s #aaa f #ddd',marginLeft,xaxisYCoord,marginLeft+offsetx,xaxisYCoord-offsety,args.object.canvas.width-marginRight+offsetx,xaxisYCoord-offsety,args.object.canvas.width-marginRight,xaxisYCoord);}}};RGraph.draw3DYAxis=function(args)
{var args=RGraph.getArgs(arguments,'object');var prop=args.object.properties;var marginLeft=args.object.marginLeft,marginRight=args.object.marginRight,marginTop=args.object.marginTop,marginBottom=args.object.marginBottom,xaxispos=prop.xaxisPosition,graphArea=args.object.canvas.height-marginTop-marginBottom,halfGraphArea=graphArea/2,offsetx=prop.variantThreedOffsetx,offsety=prop.variantThreedOffsety;if((args.object.type==='hbar'||args.object.type==='bar')&&prop.yaxisPosition==='center'){var x=((args.object.canvas.width-marginLeft-marginRight)/2)+marginLeft;}else if((args.object.type==='hbar'||args.object.type==='bar')&&prop.yaxisPosition==='right'){var x=args.object.canvas.width-marginRight;}else{var x=marginLeft;}
args.object.path('b m % % l % % l % % l % % s #aaa f #ddd',x,marginTop,x+offsetx,marginTop-offsety,x+offsetx,args.object.canvas.height-marginBottom-offsety,x,args.object.canvas.height-marginBottom);};RGraph.roundedRect=function()
{var args=RGraph.getArgs(arguments,'context,x,y,width,height,radius,roundtl,roundtr,roundbl,roundbr');var r=args.radius?args.radius:3;r=Math.min(Math.min(args.width,args.height)/2,args.radius);var corner_tl=(args.roundtl===false)?false:true,corner_tr=(args.roundtr===false)?false:true,corner_bl=(args.roundbl===false)?false:true,corner_br=(args.roundbr===false)?false:true;args.context.beginPath();args.context.moveTo(args.x,args.y+r);if(corner_tl){args.context.arc(args.x+r,args.y+r,r,RGraph.PI,RGraph.PI+RGraph.HALFPI,false);}else{args.context.lineTo(args.x,args.y);args.context.lineTo(args.x+r,args.y);}
if(corner_tr){args.context.arc(args.x+args.width-r,args.y+r,r,RGraph.PI+RGraph.HALFPI,0,false);}else{args.context.lineTo(args.x+args.width,args.y);args.context.lineTo(args.x+args.width,args.y+r);}
if(corner_br){args.context.arc(args.x+args.width-r,args.y+args.height-r,r,0,RGraph.HALFPI,false);}else{args.context.lineTo(args.x+args.width,args.y+args.height);args.context.lineTo(args.x+args.width-r,args.y+args.height);}
if(corner_bl){args.context.arc(args.x+r,args.y-r+args.height,r,RGraph.HALFPI,RGraph.PI,false);}else{args.context.lineTo(args.x,args.y+args.height);args.context.lineTo(args.x,args.y+args.height-r);}
args.context.closePath();};RGraph.addCustomEventListener=function()
{var args=RGraph.getArgs(arguments,'object,name,func');if(typeof RGraph.events[args.object.uid]==='undefined'){RGraph.events[args.object.uid]=[];}
if(args.name.substr(0,2)!=='on'){args.name='on'+args.name;}
RGraph.events[args.object.uid].push([args.object,args.name,args.func]);return RGraph.events[args.object.uid].length-1;};RGraph.fireCustomEvent=function()
{var args=RGraph.getArgs(arguments,'object,name');if(args.name.substr(0,2)!=='on'){args.name='on'+args.name;}
if(args.object&&args.object.isrgraph){if(args.object[args.name]){(args.object[args.name])(args.object);}
var uid=args.object.uid;if(typeof uid==='string'&&typeof RGraph.events==='object'&&typeof RGraph.events[uid]==='object'&&RGraph.events[uid].length>0){for(var j=0;j<RGraph.events[uid].length;++j){if(RGraph.events[uid][j]&&RGraph.events[uid][j][1]===args.name){RGraph.events[uid][j][2](args.object);}}}}};RGraph.removeAllCustomEventListeners=function()
{var args=RGraph.getArgs(arguments,'uid');if(args.uid&&RGraph.events[args.uid]){RGraph.events[args.uid]=[];}else{RGraph.events=[];RGraph.ObjectRegistry.iterate(function(obj)
{if(obj.onclick)obj.onclick=null;if(obj.onmousemove)obj.onmousemove=null;if(obj.onmouseover)obj.onmouseover=null;if(obj.onmouseout)obj.onmouseout=null;});}};RGraph.removeCustomEventListener=function()
{var args=RGraph.getArgs(arguments,'object,index');if(typeof RGraph.events==='object'&&typeof RGraph.events[args.object.uid]==='object'&&typeof RGraph.events[args.object.uid][args.index]==='object'){RGraph.events[args.object.uid][args.index]=null;}};RGraph.drawBackgroundImage=function(args)
{var args=RGraph.getArgs(arguments,'object');var prop=args.object.properties;if(typeof prop.backgroundImage==='string'){if(typeof args.object.canvas.__rgraph_background_image__==='undefined'){var img=new Image();img.__object__=args.object;img.__canvas__=args.object.canvas;img.__context__=args.object.context;img.src=args.object.get('backgroundImage');args.object.canvas.__rgraph_background_image__=img;}else{img=args.object.canvas.__rgraph_background_image__;}
img.onload=function()
{args.object.__rgraph_background_image_loaded__=true;RGraph.clear(args.object.canvas);RGraph.redrawCanvas(args.object.canvas);}
var marginLeft=args.object.marginLeft;var marginRight=args.object.marginRight;var marginTop=args.object.marginTop;var marginBottom=args.object.marginBottom;var stretch=prop.backgroundImageStretch;var align=prop.backgroundImageAlign;if(typeof align==='string'){if(align.indexOf('right')!=-1){var x=args.object.canvas.width-(prop.backgroundImageW||img.width)-marginRight;}else{var x=marginLeft;}
if(align.indexOf('bottom')!=-1){var y=args.object.canvas.height-(prop.backgroundImageH||img.height)-marginBottom;}else{var y=marginTop;}}else{var x=marginLeft||25;var y=marginTop||25;}
var x=typeof prop.backgroundImageX==='number'?prop.backgroundImageX:x;var y=typeof prop.backgroundImageY==='number'?prop.backgroundImageY:y;var w=stretch?args.object.canvas.width-marginLeft-marginRight:img.width;var h=stretch?args.object.canvas.height-marginTop-marginBottom:img.height;if(typeof prop.backgroundImageW==='number')w=prop.backgroundImageW;if(typeof prop.backgroundImageH==='number')h=prop.backgroundImageH;var oldAlpha=args.object.context.globalAlpha;args.object.context.globalAlpha=prop.backgroundImageAlpha;args.object.context.drawImage(img,x,y,w,h);args.object.context.globalAlpha=oldAlpha;}};RGraph.hasTooltips=function()
{var args=RGraph.getArgs(arguments,'object');var prop=args.object.properties;if(typeof prop.tooltips=='object'&&prop.tooltips){for(var i=0,len=prop.tooltips.length;i<len;++i){if(!RGraph.isNull(args.object.get('tooltips')[i])){return true;}}}else if(typeof prop.tooltips==='function'){return true;}
return false;};RGraph.createUID=function()
{return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c)
{var r=Math.random()*16|0,v=c=='x'?r:(r&0x3|0x8);return v.toString(16);});};RGraph.ObjectRegistry.add=function()
{var args=RGraph.getArgs(arguments,'object');var uid=args.object.uid;var id=args.object.canvas.id;RGraph.ObjectRegistry.objects.byUID[RGraph.ObjectRegistry.objects.byUID.length]=[uid,args.object];RGraph.ObjectRegistry.objects.byCanvasID.push([id,args.object]);};RGraph.ObjectRegistry.remove=function()
{var args=RGraph.getArgs(arguments,'object');var id=args.object.id;var uid=args.object.uid;for(var i=0;i<RGraph.ObjectRegistry.objects.byUID.length;++i){if(RGraph.ObjectRegistry.objects.byUID[i]&&RGraph.ObjectRegistry.objects.byUID[i][1].uid==uid){RGraph.ObjectRegistry.objects.byUID[i]=null;}}
for(var i=0;i<RGraph.ObjectRegistry.objects.byCanvasID.length;++i){if(RGraph.ObjectRegistry.objects.byCanvasID[i]&&RGraph.ObjectRegistry.objects.byCanvasID[i][1]&&RGraph.ObjectRegistry.objects.byCanvasID[i][1].uid==uid){RGraph.ObjectRegistry.objects.byCanvasID[i]=null;}}};RGraph.ObjectRegistry.clear=function()
{if(typeof arguments[0]==='object'&&!RGraph.isNull(arguments)&&(typeof arguments[0].canvas==='object'||typeof arguments[0].id==='string')){var args=arguments[0];}else{if(typeof arguments[0]==='string'){var args={id:arguments[0]};}else if(typeof arguments[0]==='object'&&arguments[0].getContext){var args={canvas:arguments[0]};}else{RGraph.ObjectRegistry.objects={};RGraph.ObjectRegistry.objects.byUID=[];RGraph.ObjectRegistry.objects.byCanvasID=[];return;}}
if(args.id||args.canvas){if(args.canvas){args.id=args.canvas.id;}
var objects=RGraph.ObjectRegistry.getObjectsByCanvasID(args.id);for(var i=0,len=objects.length;i<len;++i){RGraph.ObjectRegistry.remove(objects[i]);}}else{RGraph.ObjectRegistry.objects={};RGraph.ObjectRegistry.objects.byUID=[];RGraph.ObjectRegistry.objects.byCanvasID=[];}};RGraph.ObjectRegistry.list=function()
{var args=RGraph.getArgs(arguments,'alert');var list=[];for(var i=0,len=RGraph.ObjectRegistry.objects.byUID.length;i<len;++i){if(RGraph.ObjectRegistry.objects.byUID[i]){list.push(RGraph.ObjectRegistry.objects.byUID[i][1].type);}}
if(args.alert){$p(list);}else{return list;}};RGraph.ObjectRegistry.clearByType=function()
{var args=RGraph.getArgs(arguments,'type');var objects=RGraph.ObjectRegistry.objects.byUID;for(var i=0,len=objects.length;i<len;++i){if(objects[i]){var uid=objects[i][0],obj=objects[i][1];if(obj&&obj.type===args.type){RGraph.ObjectRegistry.remove(obj);}}}};RGraph.ObjectRegistry.iterate=function()
{var args=RGraph.getArgs(arguments,'func,type');var objects=RGraph.ObjectRegistry.objects.byUID;for(var i=0,len=objects.length;i<len;++i){if(typeof args.type==='string'){var types=args.type.split(/,/);for(var j=0,len2=types.length;j<len2;++j){if(types[j]==objects[i][1].type){args.func(objects[i][1]);}}}else{args.func(objects[i][1]);}}};RGraph.ObjectRegistry.getObjectsByCanvasID=function()
{var args=RGraph.getArgs(arguments,'id');var store=RGraph.ObjectRegistry.objects.byCanvasID;var ret=[];for(var i=0,len=store.length;i<len;++i){if(store[i]&&store[i][0]==args.id){ret.push(store[i][1]);}}
return ret;};RGraph.ObjectRegistry.firstbyxy=RGraph.ObjectRegistry.getObjectByXY=RGraph.ObjectRegistry.getFirstObjectByXY=function()
{var args=RGraph.getArgs(arguments,'event');var canvas=args.event.target;var ret=null;var objects=RGraph.ObjectRegistry.getObjectsByCanvasID(canvas.id);for(var i=(objects.length-1);i>=0;--i){var obj=objects[i].getObjectByXY(args.event);if(obj){return obj;}}};RGraph.ObjectRegistry.getObjectsByXY=function()
{var args=RGraph.getArgs(arguments,'event');var canvas=args.event.target,ret=[],objects=RGraph.ObjectRegistry.getObjectsByCanvasID(canvas.id);for(var i=(objects.length-1);i>=0;--i){var obj=objects[i].getObjectByXY(args.event);if(obj){ret.push(obj);}}
return ret;};RGraph.ObjectRegistry.get=RGraph.ObjectRegistry.getObjectByUID=function()
{var args=RGraph.getArgs(arguments,'uid');var objects=RGraph.ObjectRegistry.objects.byUID;for(var i=0,len=objects.length;i<len;++i){if(objects[i]&&objects[i][1].uid==args.uid){return objects[i][1];}}};RGraph.ObjectRegistry.bringToFront=function()
{var args=RGraph.getArgs(arguments,'object,redraw');var redraw=args.redraw?true:args.redraw;RGraph.ObjectRegistry.remove(args.object);RGraph.ObjectRegistry.add(args.object);if(redraw){RGraph.redrawCanvas(args.object.canvas);}};RGraph.ObjectRegistry.type=RGraph.ObjectRegistry.getObjectsByType=function()
{var args=RGraph.getArgs(arguments,'type');var objects=RGraph.ObjectRegistry.objects.byUID;var ret=[];for(i in objects){if(objects[i]&&objects[i][1]&&objects[i][1].type&&objects[i][1].type&&objects[i][1].type==args.type){ret.push(objects[i][1]);}}
return ret;};RGraph.ObjectRegistry.first=RGraph.ObjectRegistry.getFirstObjectByType=function()
{var args=RGraph.getArgs(arguments,'type');var objects=RGraph.ObjectRegistry.objects.byUID;for(var i in objects){if(objects[i]&&objects[i][1]&&objects[i][1].type==args.type){return objects[i][1];}}
return null;};RGraph.getAngleByXY=function()
{var args=RGraph.getArgs(arguments,'cx,cy,x,y');var angle=Math.atan((args.y-args.cy)/(args.x-args.cx));angle=Math.abs(angle)
if(args.x>=args.cx&&args.y>=args.cy){angle+=RGraph.TWOPI;}else if(args.x>=args.cx&&args.y<args.cy){angle=(RGraph.HALFPI-angle)+(RGraph.PI+RGraph.HALFPI);}else if(args.x<args.cx&&args.y<args.cy){angle+=RGraph.PI;}else{angle=RGraph.PI-angle;}
if(angle>RGraph.TWOPI){angle-=RGraph.TWOPI;}
return angle;};RGraph.getHypLength=function()
{var args=RGraph.getArgs(arguments,'x1,y1,x2,y2');return Math.sqrt(((args.x2-args.x1)*(args.x2-args.x1))+((args.y2-args.y1)*(args.y2-args.y1)));};RGraph.getRadiusEndPoint=function()
{var args=RGraph.getArgs(arguments,'cx,cy,angle,radius');var x=args.cx+(Math.cos(args.angle)*args.radius);var y=args.cy+(Math.sin(args.angle)*args.radius);return[x,y];};RGraph.installEventListeners=function()
{var args=RGraph.getArgs(arguments,'object');var prop=args.object.properties;if(RGraph.installCanvasClickListener){RGraph.installWindowMousedownListener(args.object);RGraph.installWindowMouseupListener(args.object);RGraph.installCanvasMousemoveListener(args.object);RGraph.installCanvasMouseupListener(args.object);RGraph.installCanvasMousedownListener(args.object);RGraph.installCanvasClickListener(args.object);}else if(RGraph.hasTooltips(args.object)||prop.adjustable||prop.annotatable||prop.contextmenu||prop.keyInteractive||typeof args.object.onclick==='function'||typeof args.object.onmousemove==='function'||typeof args.object.onmouseout==='function'||typeof args.object.onmouseover==='function'){alert('[RGRAPH] You appear to have used dynamic features but not included the file: RGraph.common.dynamic.js');}};RGraph.pr=function()
{var args=RGraph.getArgs(arguments,'object,alert,indent,counter');var indent=(args.indent?args.indent:'    ');var str='';var counter=typeof args.counter=='number'?args.counter:0;if(counter>=6){return'';}
switch(typeof args.object){case'string':str+=args.object+' ('+(typeof args.object)+', '+args.object.length+')';break;case'number':str+=args.object+' ('+(typeof args.object)+')';break;case'boolean':str+=args.object+' ('+(typeof args.object)+')';break;case'function':str+='function () {}';break;case'undefined':str+='undefined';break;case'null':str+='null';break;case'object':if(RGraph.isNull(args.object)){str+=indent+'null\n';}else{str+=indent+'Object {'+'\n'
for(var j in args.object){str+=indent+'    '+j+' => '+RGraph.pr(args.object[j],true,indent+'    ',counter+1)+'\n';}
str+=indent+'}';}
break;default:str+='Unknown type: '+typeof obj+'';break;}
if(!args.alert){alert(str);}
return str;};RGraph.dashedLine=function()
{var args=RGraph.getArgs(arguments,'context,x1,y1,x2,y2,size'),dx=args.x2-args.x1,dy=args.y2-args.y1,num=Math.floor(Math.sqrt((dx*dx)+(dy*dy))/(args.size||3)),xLen=dx/num,yLen=dy/num,count=0;do{if(count%2==0&&count>0){args.context.lineTo(args.x1,args.y1);}else{args.context.moveTo(args.x1,args.y1);}
args.x1+=xLen;args.y1+=yLen;count++;}while(count<=num);};RGraph.AJAX=function()
{var args=RGraph.getArgs(arguments,'url,callback');if(window.XMLHttpRequest){var httpRequest=new XMLHttpRequest();}else if(window.ActiveXObject){var httpRequest=new ActiveXObject("Microsoft.XMLHTTP");}
httpRequest.onreadystatechange=function()
{if(this.readyState==4&&this.status==200){this.__user_callback__=args.callback;this.__user_callback__(this.responseText);}}
httpRequest.open('GET',args.url,true);httpRequest.send();};RGraph.AJAX.post=RGraph.AJAX.POST=function()
{var args=RGraph.getArgs(arguments,'url,data,callback');var crumbs=[];if(window.XMLHttpRequest){var httpRequest=new XMLHttpRequest();}else if(window.ActiveXObject){var httpRequest=new ActiveXObject("Microsoft.XMLHTTP");}
httpRequest.onreadystatechange=function()
{if(this.readyState==4&&this.status==200){this.__user_callback__=args.callback;this.__user_callback__(this.responseText);}}
httpRequest.open('POST',args.url,true);httpRequest.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(i in args.data){if(typeof i=='string'){crumbs.push(i+'='+encodeURIComponent(args.data[i]));}}
httpRequest.send(crumbs.join('&'));};RGraph.AJAX.getNumber=function()
{var args=RGraph.getArgs(arguments,'url,callback');RGraph.AJAX(args.url,function()
{var num=parseFloat(this.responseText);args.callback(num);});};RGraph.AJAX.getString=function()
{var args=RGraph.getArgs(arguments,'url,callback');RGraph.AJAX(args.url,function()
{var str=String(this.responseText);args.callback(str);});};RGraph.AJAX.getJSON=function()
{var args=RGraph.getArgs(arguments,'url,callback');RGraph.AJAX(args.url,function()
{var json=eval('('+this.responseText+')');args.callback(json);});};RGraph.AJAX.getCSV=function()
{var args=RGraph.getArgs(arguments,'url,callback,separator');var separator=args.separator?args.separator:',';RGraph.AJAX(args.url,function()
{var regexp=new RegExp(separator);var arr=this.responseText.split(regexp);for(var i=0,len=arr.length;i<len;++i){arr[i]=parseFloat(arr[i]);}
args.callback(arr);});};RGraph.rotateCanvas=function()
{var args=RGraph.getArgs(arguments,'canvas,x,y,angle');var context=args.canvas.getContext('2d');context.translate(args.x,args.y);context.rotate(args.angle);context.translate(0-args.x,0-args.y);};RGraph.measureText=function()
{var args=RGraph.getArgs(arguments,'text,bold,font,size');if(typeof RGraph.measuretext_cache==='undefined'){RGraph.measuretext_cache=[];}
var str=args.text+':'+args.bold+':'+args.font+':'+args.size;if(typeof RGraph.measuretext_cache=='object'&&RGraph.measuretext_cache[str]){return RGraph.measuretext_cache[str];}
if(!RGraph.measuretext_cache['text-div']){var div=document.createElement('DIV');div.style.position='absolute';div.style.top='-100px';div.style.left='-100px';div.style.lineHeight=(args.size||12)*1.5+'px';document.body.appendChild(div);RGraph.measuretext_cache['text-div']=div;}else if(RGraph.measuretext_cache['text-div']){var div=RGraph.measuretext_cache['text-div'];while(div.firstChild){div.removeChild(div.firstChild);}}
div.insertAdjacentHTML('afterbegin',String(args.text).replace(/\r?\n/g,'<br />'));div.style.fontFamily=args.font;div.style.fontWeight=args.bold?'bold':'normal';div.style.fontSize=(args.size||12)+'pt';RGraph.measuretext_cache[str]=[div.offsetWidth,div.offsetHeight];return[div.offsetWidth,div.offsetHeight];};RGraph.text=function(args)
{if(arguments[0]&&arguments[1]&&typeof arguments[1].text==='string'){var obj=arguments[0],args=arguments[1];}else{var obj=args.object;}
for(var i in RGraph.text.defaults){if(typeof i==='string'&&typeof args[i]==='undefined'){args[i]=RGraph.text.defaults[i];}}
function domtext()
{if(String(args.size).toLowerCase().indexOf('italic')!==-1){args.size=args.size.replace(/ *italic +/,'');args.italic=true;}
var cacheKey=Math.abs(parseInt(args.x))+'_'+Math.abs(parseInt(args.y))+'_'+String(args.text).replace(/[^a-zA-Z0-9]+/g,'_')+'_'+obj.canvas.id;if(!obj.canvas.rgraph_domtext_wrapper){var wrapper=document.createElement('div');wrapper.id=obj.canvas.id+'_rgraph_domtext_wrapper';wrapper.className='rgraph_domtext_wrapper';wrapper.style.overflow=obj.properties.textAccessibleOverflow!=false&&obj.properties.textAccessibleOverflow!='hidden'?'visible':'hidden';wrapper.style.width=obj.canvas.offsetWidth+'px';wrapper.style.height=obj.canvas.offsetHeight+'px';wrapper.style.cssFloat=obj.canvas.style.cssFloat;wrapper.style.display=obj.canvas.style.display||'inline-block';wrapper.style.position=obj.canvas.style.position||'relative';wrapper.style.left=obj.canvas.style.left;wrapper.style.right=obj.canvas.style.right;wrapper.style.top=obj.canvas.style.top;wrapper.style.bottom=obj.canvas.style.bottom;wrapper.style.width=obj.canvas.width+'px';wrapper.style.height=obj.canvas.height+'px';wrapper.style.lineHeight='initial';obj.canvas.style.position='absolute';obj.canvas.style.left=0;obj.canvas.style.top=0;obj.canvas.style.display='inline';obj.canvas.style.cssFloat='none';if((obj.type==='bar'||obj.type==='bipolar'||obj.type==='hbar')&&obj.properties.variant==='3d'){wrapper.style.transform='skewY(5.7deg)';}
obj.canvas.parentNode.insertBefore(wrapper,obj.canvas);obj.canvas.parentNode.removeChild(obj.canvas);wrapper.appendChild(obj.canvas);obj.canvas.rgraph_domtext_wrapper=wrapper;}else{wrapper=obj.canvas.rgraph_domtext_wrapper;}
var defaults={size:12,font:'Arial',italic:'normal',bold:'normal',valign:'bottom',halign:'left',marker:true,color:context.fillStyle,bounding:{enabled:false,fill:'rgba(255,255,255,0.7)',stroke:'#666',linewidth:1}}
args.text=String(args.text).replace(/\r?\n/g,'[[RETURN]]');if(typeof RGraph.text.domNodeCache==='undefined'){RGraph.text.domNodeCache=new Array();}
if(typeof RGraph.text.domNodeCache[obj.id]==='undefined'){RGraph.text.domNodeCache[obj.id]=new Array();}
if(typeof RGraph.text.domNodeDimensionCache==='undefined'){RGraph.text.domNodeDimensionCache=new Array();}
if(typeof RGraph.text.domNodeDimensionCache[obj.id]==='undefined'){RGraph.text.domNodeDimensionCache[obj.id]=new Array();}
if(!RGraph.text.domNodeCache[obj.id]||!RGraph.text.domNodeCache[obj.id][cacheKey]){var span=document.createElement('span');span.style.position='absolute';span.style.display='inline';span.className=' rgraph_accessible_text'
+' rgraph_accessible_text_'+obj.id
+' rgraph_accessible_text_'+(args.tag||'').replace(/\./,'_')
+' rgraph_accessible_text_'+obj.type;span.style.left=(args.x*(parseInt(obj.canvas.offsetWidth)/parseInt(obj.canvas.width)))+'px';span.style.top=(args.y*(parseInt(obj.canvas.offsetHeight)/parseInt(obj.canvas.height)))+'px';span.style.color=args.color||defaults.color;span.style.fontFamily=args.font||defaults.font;span.style.fontWeight=args.bold?'bold':defaults.bold;span.style.fontStyle=args.italic?'italic':defaults.italic;span.style.fontSize=(args.size||defaults.size)+'pt';span.style.whiteSpace='nowrap';span.style.lineHeight=RGraph.ISIE?'normal':'initial';span.tag=args.tag;if(typeof args.angle==='number'&&args.angle!==0){var coords=RGraph.measureText(args.text,args.bold,args.font,args.size);var hOrigin,vOrigin;if(args.halign==='center'){hOrigin='50%';}
else if(args.halign==='right'){hOrigin='100%';}
else{hOrigin='0%';}
if(args.valign==='center'){vOrigin='50%';}
else if(args.valign==='top'){vOrigin='0%';}
else{vOrigin='100%';}
span.style.transformOrigin='{1} {2}'.format(hOrigin,vOrigin);span.style.transform='rotate('+args.angle+'deg)';}
span.style.textShadow='{1}px {2}px {3}px {4}'.format(context.shadowOffsetX,context.shadowOffsetY,context.shadowBlur,context.shadowColor);if(args.bounding){span.style.border='1px solid '+(args['bounding.stroke']||defaults.bounding.stroke);span.style.backgroundColor=args['bounding.fill']||defaults.bounding.fill;span.style.borderWidth=typeof args['bounding.linewidth']==='number'?args['bounding.linewidth']:defaults.bounding.linewidth;}
if((typeof obj.properties.textAccessiblePointerevents==='undefined'||obj.properties.textAccessiblePointerevents)&&obj.properties.textAccessiblePointerevents!=='none'){span.style.pointerEvents='auto';}else{span.style.pointerEvents='none';}
span.style.padding=args.bounding?'2px':null;span.__text__=args.text
span.insertAdjacentHTML('afterbegin',args.text.replace('&','&amp;').replace('<','&lt;').replace('>','&gt;').replace(/\[\[RETURN\]\]/g,'<br />'));wrapper.appendChild(span);args.halign=args.halign||'left';args.valign=args.valign||'bottom';if(args.halign==='right'){span.style.left=parseFloat(span.style.left)-span.offsetWidth+'px';span.style.textAlign='right';}else if(args.halign==='center'){span.style.left=parseFloat(span.style.left)-(span.offsetWidth/2)+'px';span.style.textAlign='center';}
if(args.valign==='top'){}else if(args.valign==='center'){span.style.top=parseFloat(span.style.top)-(span.offsetHeight/2)+'px';}else{span.style.top=parseFloat(span.style.top)-span.offsetHeight+'px';}
var offsetWidth=parseFloat(span.offsetWidth),offsetHeight=parseFloat(span.offsetHeight),top=parseFloat(span.style.top),left=parseFloat(span.style.left);RGraph.text.domNodeCache[obj.id][cacheKey]=span;RGraph.text.domNodeDimensionCache[obj.id][cacheKey]={left:left,top:top,width:offsetWidth,height:offsetHeight};span.id=cacheKey;}else{span=RGraph.text.domNodeCache[obj.id][cacheKey];span.style.display='inline';var offsetWidth=RGraph.text.domNodeDimensionCache[obj.id][cacheKey].width,offsetHeight=RGraph.text.domNodeDimensionCache[obj.id][cacheKey].height,top=RGraph.text.domNodeDimensionCache[obj.id][cacheKey].top,left=RGraph.text.domNodeDimensionCache[obj.id][cacheKey].left;}
if(args.marker){obj.path('b m % % l % % m % % l % % s',args.x-5,args.y,args.x+5,args.y,args.x,args.y-5,args.x,args.y+5);}
if(obj.type==='drawing.text'){if(obj.properties.tooltips){span.addEventListener(obj.properties.tooltipsEvent.indexOf('mousemove')!==-1?'mousemove':'click',function(e)
{if(!RGraph.Registry.get('tooltip')||RGraph.Registry.get('tooltip').__index__!==0||RGraph.Registry.get('tooltip').__object__.uid!=obj.uid){RGraph.hideTooltip();RGraph.redraw();RGraph.tooltip(obj,obj.properties.tooltips[0],args.x,args.y,0,e);}},false);}}
var ret={};ret.x=left;ret.y=top;ret.width=offsetWidth;ret.height=offsetHeight;ret.object=obj;ret.text=args.text;ret.tag=args.tag;RGraph.text.domNodeCache.reset=function()
{if(arguments[0]){if(typeof arguments[0]==='string'){var canvas=document.getElementById(arguments[0])}else{var canvas=arguments[0];}
var nodes=RGraph.text.domNodeCache[canvas.id];for(j in nodes){var node=RGraph.text.domNodeCache[canvas.id][j];if(node&&node.parentNode){node.parentNode.removeChild(node);}}
RGraph.text.domNodeCache[canvas.id]=[];RGraph.text.domNodeDimensionCache[canvas.id]=[];}else{for(i in RGraph.text.domNodeCache){for(j in RGraph.text.domNodeCache[i]){if(RGraph.text.domNodeCache[i][j]&&RGraph.text.domNodeCache[i][j].parentNode){RGraph.text.domNodeCache[i][j].parentNode.removeChild(RGraph.text.domNodeCache[i][j]);}}}
RGraph.text.domNodeCache=[];RGraph.text.domNodeDimensionCache=[];}};RGraph.text.find=function(args)
{var span,nodes=[];if(args.object&&args.object.isrgraph){var id=args.object.id;}else if(args.id){var id=typeof args.id==='string'?args.id:args.object.id;args.object=document.getElementById(id).__object__;}else{alert('[RGRAPH] You Must give either an object or an ID to the RGraph.text.find() function');return false;}
for(i in RGraph.text.domNodeCache[id]){span=RGraph.text.domNodeCache[id][i];if(typeof args.tag==='string'&&args.tag===span.tag){nodes.push(span);continue;}
if(typeof args.tag==='object'&&args.tag.constructor.toString().indexOf('RegExp')){var regexp=new RegExp(args.tag);if(regexp.test(span.tag)){nodes.push(span);continue;}}
if(typeof args.text==='string'&&args.text===span.__text__){nodes.push(span);continue;}
if(typeof args.text==='object'&&args.text.constructor.toString().indexOf('RegExp')){var regexp=new RegExp(args.text);if(regexp.test(span.__text__)){nodes.push(span);continue;}}}
if(typeof args.callback==='function'){(args.callback)({nodes:nodes,object:args.object});}
return nodes;};ret.node=span;if(obj&&obj.isrgraph&&obj.coordsText){obj.coordsText.push(ret);}
return ret;}
if(obj&&obj.isrgraph){var obj=obj;var canvas=obj.canvas;var context=obj.context;}else if(typeof obj=='string'){var canvas=document.getElementById(obj);var context=canvas.getContext('2d');var obj=canvas.__object__;}else if(typeof obj.getContext==='function'){var canvas=obj;var context=canvas.getContext('2d');var obj=canvas.__object__;}else if(obj.toString().indexOf('CanvasRenderingContext2D')!=-1||RGraph.ISIE8&&obj.moveTo){var context=obj;var canvas=obj.canvas;var obj=canvas.__object__;}else if(RGraph.ISOLD&&obj.fillText){var context=obj;var canvas=obj.canvas;var obj=canvas.__object__;}
if(typeof args.boundingFill==='string')args['bounding.fill']=args.boundingFill;if(typeof args.boundingStroke==='string')args['bounding.stroke']=args.boundingStroke;if(typeof args.boundingLinewidth==='number')args['bounding.linewidth']=args.boundingLinewidth;if(typeof args.textConfPrefix==='string'&&args.textConfPrefix.length){var textConf=RGraph.getTextConf({object:obj,prefix:args.textConfPrefix});args.font=textConf.font;args.size=textConf.size;args.color=textConf.color;args.bold=textConf.bold;args.italic=textConf.italic;}
if(typeof args.accessible==='undefined'){if(obj&&obj.properties.textAccessible){return domtext();}}else if(typeof args.accessible==='boolean'&&args.accessible){return domtext();}
var x=args.x,y=args.y,originalX=x,originalY=y,text=args.text,text_multiline=typeof text==='string'?text.split(/\r?\n/g):'',numlines=text_multiline.length,font=args.font?args.font:'Arial',size=args.size?args.size:10,size_pixels=size*1.5,bold=args.bold,italic=args.italic,halign=args.halign?args.halign:'left',valign=args.valign?args.valign:'bottom',tag=typeof args.tag=='string'&&args.tag.length>0?args.tag:'',marker=args.marker,angle=args.angle||0;var bounding=args.bounding,bounding_stroke=args['bounding.stroke']?args['bounding.stroke']:'black',bounding_fill=args['bounding.fill']?args['bounding.fill']:'rgba(255,255,255,0.7)',bounding_shadow=args['bounding.shadow'],bounding_shadow_color=args['bounding.shadow.color']||'#ccc',bounding_shadow_blur=args['bounding.shadow.blur']||3,bounding_shadow_offsetx=args['bounding.shadow.offsetx']||3,bounding_shadow_offsety=args['bounding.shadow.offsety']||3,bounding_linewidth=typeof args['bounding.linewidth']==='number'?args['bounding.linewidth']:1;var ret={};if(typeof args.color==='string'){var orig_fillstyle=context.fillStyle;context.fillStyle=args.color;}
if(typeof text=='number'){text=String(text);}
if(typeof text!=='string'){return;}
if(angle!=0){context.save();context.translate(x,y);context.rotate((Math.PI/180)*angle)
x=0;y=0;}
context.font=(args.italic?'italic ':'')+(args.bold?'bold ':'')+size+'pt '+font;var width=0;for(var i=0;i<numlines;++i){width=Math.max(width,context.measureText(text_multiline[i]).width);}
var height=size_pixels*numlines;if(args.marker){var marker_size=10;var strokestyle=context.strokeStyle;context.beginPath();context.strokeStyle='red';context.moveTo(x,y-marker_size);context.lineTo(x,y+marker_size);context.moveTo(x-marker_size,y);context.lineTo(x+marker_size,y);context.stroke();context.strokeStyle=strokestyle;}
if(halign=='center'){context.textAlign='center';var boundingX=x-2-(width/2);}else if(halign=='right'){context.textAlign='right';var boundingX=x-2-width;}else{context.textAlign='left';var boundingX=x-2;}
if(valign=='center'){context.textBaseline='middle';y-=1;y-=((numlines-1)/2)*size_pixels;var boundingY=y-(size_pixels/2)-2;}else if(valign=='top'){context.textBaseline='top';var boundingY=y-2;}else{context.textBaseline='bottom';if(numlines>1){y-=((numlines-1)*size_pixels);}
var boundingY=y-size_pixels-2;}
var boundingW=width+4;var boundingH=height+4;if(bounding){var pre_bounding_linewidth=context.lineWidth,pre_bounding_strokestyle=context.strokeStyle,pre_bounding_fillstyle=context.fillStyle,pre_bounding_shadowcolor=context.shadowColor,pre_bounding_shadowblur=context.shadowBlur,pre_bounding_shadowoffsetx=context.shadowOffsetX,pre_bounding_shadowoffsety=context.shadowOffsetY;context.lineWidth=bounding_linewidth?bounding_linewidth:0.001;context.strokeStyle=bounding_stroke;context.fillStyle=bounding_fill;if(bounding_shadow){context.shadowColor=bounding_shadow_color;context.shadowBlur=bounding_shadow_blur;context.shadowOffsetX=bounding_shadow_offsetx;context.shadowOffsetY=bounding_shadow_offsety;}
context.fillRect(boundingX,boundingY,boundingW,boundingH);context.strokeRect(boundingX,boundingY,boundingW,boundingH);context.lineWidth=pre_bounding_linewidth;context.strokeStyle=pre_bounding_strokestyle;context.fillStyle=pre_bounding_fillstyle;context.shadowColor=pre_bounding_shadowcolor
context.shadowBlur=pre_bounding_shadowblur
context.shadowOffsetX=pre_bounding_shadowoffsetx
context.shadowOffsetY=pre_bounding_shadowoffsety}
if(numlines>1){for(var i=0;i<numlines;++i){context.fillText(text_multiline[i],x,y+(size_pixels*i));}}else{context.fillText(text,x+0.5,y+0.5);}
if(angle!=0){if(angle==90){if(halign=='left'){if(valign=='bottom'){boundingX=originalX-2;boundingY=originalY-2;boundingW=height+4;boundingH=width+4;}
if(valign=='center'){boundingX=originalX-(height/2)-2;boundingY=originalY-2;boundingW=height+4;boundingH=width+4;}
if(valign=='top'){boundingX=originalX-height-2;boundingY=originalY-2;boundingW=height+4;boundingH=width+4;}}else if(halign=='center'){if(valign=='bottom'){boundingX=originalX-2;boundingY=originalY-(width/2)-2;boundingW=height+4;boundingH=width+4;}
if(valign=='center'){boundingX=originalX-(height/2)-2;boundingY=originalY-(width/2)-2;boundingW=height+4;boundingH=width+4;}
if(valign=='top'){boundingX=originalX-height-2;boundingY=originalY-(width/2)-2;boundingW=height+4;boundingH=width+4;}}else if(halign=='right'){if(valign=='bottom'){boundingX=originalX-2;boundingY=originalY-width-2;boundingW=height+4;boundingH=width+4;}
if(valign=='center'){boundingX=originalX-(height/2)-2;boundingY=originalY-width-2;boundingW=height+4;boundingH=width+4;}
if(valign=='top'){boundingX=originalX-height-2;boundingY=originalY-width-2;boundingW=height+4;boundingH=width+4;}}}else if(angle==180){if(halign=='left'){if(valign=='bottom'){boundingX=originalX-width-2;boundingY=originalY-2;boundingW=width+4;boundingH=height+4;}
if(valign=='center'){boundingX=originalX-width-2;boundingY=originalY-(height/2)-2;boundingW=width+4;boundingH=height+4;}
if(valign=='top'){boundingX=originalX-width-2;boundingY=originalY-height-2;boundingW=width+4;boundingH=height+4;}}else if(halign=='center'){if(valign=='bottom'){boundingX=originalX-(width/2)-2;boundingY=originalY-2;boundingW=width+4;boundingH=height+4;}
if(valign=='center'){boundingX=originalX-(width/2)-2;boundingY=originalY-(height/2)-2;boundingW=width+4;boundingH=height+4;}
if(valign=='top'){boundingX=originalX-(width/2)-2;boundingY=originalY-height-2;boundingW=width+4;boundingH=height+4;}}else if(halign=='right'){if(valign=='bottom'){boundingX=originalX-2;boundingY=originalY-2;boundingW=width+4;boundingH=height+4;}
if(valign=='center'){boundingX=originalX-2;boundingY=originalY-(height/2)-2;boundingW=width+4;boundingH=height+4;}
if(valign=='top'){boundingX=originalX-2;boundingY=originalY-height-2;boundingW=width+4;boundingH=height+4;}}}else if(angle==270){if(halign=='left'){if(valign=='bottom'){boundingX=originalX-height-2;boundingY=originalY-width-2;boundingW=height+4;boundingH=width+4;}
if(valign=='center'){boundingX=originalX-(height/2)-4;boundingY=originalY-width-2;boundingW=height+4;boundingH=width+4;}
if(valign=='top'){boundingX=originalX-2;boundingY=originalY-width-2;boundingW=height+4;boundingH=width+4;}}else if(halign=='center'){if(valign=='bottom'){boundingX=originalX-height-2;boundingY=originalY-(width/2)-2;boundingW=height+4;boundingH=width+4;}
if(valign=='center'){boundingX=originalX-(height/2)-4;boundingY=originalY-(width/2)-2;boundingW=height+4;boundingH=width+4;}
if(valign=='top'){boundingX=originalX-2;boundingY=originalY-(width/2)-2;boundingW=height+4;boundingH=width+4;}}else if(halign=='right'){if(valign=='bottom'){boundingX=originalX-height-2;boundingY=originalY-2;boundingW=height+4;boundingH=width+4;}
if(valign=='center'){boundingX=originalX-(height/2)-2;boundingY=originalY-2;boundingW=height+4;boundingH=width+4;}
if(valign=='top'){boundingX=originalX-2;boundingY=originalY-2;boundingW=height+4;boundingH=width+4;}}}
context.restore();}
context.textBaseline='alphabetic';context.textAlign='left';ret.x=boundingX;ret.y=boundingY;ret.width=boundingW;ret.height=boundingH
ret.object=obj;ret.text=text;ret.tag=tag;if(obj&&obj.isrgraph&&obj.coordsText){obj.coordsText.push(ret);}
if(typeof orig_fillstyle==='string'){context.fillStyle=orig_fillstyle;}
return ret;};RGraph.text.defaults={};RGraph.sequentialIndexToGrouped=function()
{var args=RGraph.getArgs(arguments,'index,data');var group=0;var grouped_index=0;while(--args.index>=0){if(RGraph.isNull(args.data[group])){group++;grouped_index=0;continue;}
if(typeof args.data[group]=='number'){group++
grouped_index=0;continue;}
grouped_index++;if(grouped_index>=args.data[group].length){group++;grouped_index=0;}}
return[group,grouped_index];};RGraph.groupedIndexToSequential=function()
{var args=RGraph.getArgs(arguments,'object,dataset,index');for(var i=0,seq=0;i<=args.dataset;++i){for(var j=0;j<args.object.data[args.dataset].length;++j){if(i===args.dataset&&j===args.index){return seq;}
seq++;}}
return seq;};RGraph.Highlight.rect=function()
{var args=RGraph.getArgs(arguments,'object,shape');var prop=args.object.properties;if(prop.tooltipsHighlight){args.object.context.lineWidth=1;args.object.context.beginPath();args.object.context.strokeStyle=prop.highlightStroke;args.object.context.fillStyle=prop.highlightFill;args.object.context.rect(args.shape.x,args.shape.y,args.shape.width,args.shape.height);args.object.context.stroke();args.object.context.fill();}};RGraph.Highlight.point=function()
{var args=RGraph.getArgs(arguments,'object,shape');var prop=args.object.properties;if(prop.tooltipsHighlight){args.object.context.beginPath();args.object.context.strokeStyle=prop.highlightStroke;args.object.context.fillStyle=prop.highlightFill;var radius=prop.highlightPointRadius||2;args.object.context.arc(args.shape.x,args.shape.y,radius,0,RGraph.TWOPI,0);args.object.context.stroke();args.object.context.fill();}};RGraph.parseDate=function()
{var args=RGraph.getArgs(arguments,'str');if(args.str.match(/^\d\d\d\d-\d\d-\d\d(t|T)\d\d:\d\d(:\d\d)?$/)){args.str=args.str.toUpperCase().replace(/T/,' ');}
var d=new Date();var defaults={seconds:'00',minutes:'00',hours:'00',date:d.getDate(),month:d.getMonth()+1,year:d.getFullYear()};var months=['january','february','march','april','may','june','july','august','september','october','november','december'],months_regex=months.join('|');for(var i=0;i<months.length;++i){months[months[i]]=i;months[months[i].substring(0,3)]=i;months_regex=months_regex+'|'+months[i].substring(0,3);}
var sep='[-./_=+~#:;,]+';var tokens=args.str.split(/ +/);for(var i=0,len=tokens.length;i<len;++i){if(tokens[i]){if(tokens[i].match(/^\d\d\d\d$/)){defaults.year=tokens[i];}
var res=isMonth(tokens[i]);if(typeof res==='number'){defaults.month=res+1;}
if(tokens[i].match(/^\d?\d(?:st|nd|rd|th)?$/)){defaults.date=parseInt(tokens[i]);}
if(tokens[i].match(/^(\d\d):(\d\d):?(?:(\d\d))?$/)){defaults.hours=parseInt(RegExp.$1);defaults.minutes=parseInt(RegExp.$2);if(RegExp.$3){defaults.seconds=parseInt(RegExp.$3);}}
if(tokens[i].match(new RegExp('^(\\d\\d\\d\\d)'+sep+'(\\d\\d)'+sep+'(\\d\\d)$','i'))){defaults.date=parseInt(RegExp.$3);defaults.month=parseInt(RegExp.$2);defaults.year=parseInt(RegExp.$1);}
if(tokens[i].match(new RegExp('^(\\d\\d)'+sep+'(\\d\\d)'+sep+'(\\d\\d\\d\\d)$','i'))){defaults.date=parseInt(RegExp.$1);defaults.month=parseInt(RegExp.$2);defaults.year=parseInt(RegExp.$3);}}}
args.str='{1}/{2}/{3} {4}:{5}:{6}'.format(defaults.year,String(defaults.month).length===1?'0'+(defaults.month):defaults.month,String(defaults.date).length===1?'0'+(defaults.date):defaults.date,String(defaults.hours).length===1?'0'+(defaults.hours):defaults.hours,String(defaults.minutes).length===1?'0'+(defaults.minutes):defaults.minutes,String(defaults.seconds).length===1?'0'+(defaults.seconds):defaults.seconds);return Date.parse(args.str);function isMonth(str)
{var res=str.toLowerCase().match(months_regex);return res?months[res[0]]:false;}};RGraph.parseDateOld=function()
{var args=RGraph.getArgs(arguments,'str');args.str=RGraph.trim(args.str);if(args.str==='now'){args.str=(new Date()).toString();}
if(args.str.match(/^(\d\d)(?:-|\/)(\d\d)(?:-|\/)(\d\d\d\d)(.*)$/)){args.str='{1}/{2}/{3}{4}'.format(RegExp.$3,RegExp.$2,RegExp.$1,RegExp.$4);}
if(args.str.match(/^(\d\d\d\d)(-|\/)(\d\d)(-|\/)(\d\d)( |T)(\d\d):(\d\d):(\d\d)$/)){args.str=RegExp.$1+'-'+RegExp.$3+'-'+RegExp.$5+'T'+RegExp.$7+':'+RegExp.$8+':'+RegExp.$9;}
if(args.str.match(/^\d\d\d\d-\d\d-\d\d$/)){args.str=args.str.replace(/-/g,'/');}
if(args.str.match(/^\d\d:\d\d:\d\d$/)){var dateObj=new Date();var date=dateObj.getDate();var month=dateObj.getMonth()+1;var year=dateObj.getFullYear();if(String(month).length===1)month='0'+month;if(String(date).length===1)date='0'+date;args.str=(year+'/'+month+'/'+date)+' '+args.str;}
return Date.parse(args.str);};RGraph.resetColorsToOriginalValues=function()
{var args=RGraph.getArgs(arguments,'object');if(args.object.original_colors){for(var j in args.object.original_colors){if(typeof j==='string'){args.object.properties[j]=RGraph.arrayClone(args.object.original_colors[j]);}}}
if(typeof args.object.resetColorsToOriginalValues==='function'){args.object.resetColorsToOriginalValues();}
args.object.colorsParsed=false;};RGraph.linearGradient=function()
{var args=arguments[0];var gradient=args.object.context.createLinearGradient(args.x1,args.y1,args.x2,args.y2);var numColors=args.colors.length;for(var i=0;i<args.colors.length;++i){var color=args.colors[i];var stop=i/(numColors-1);gradient.addColorStop(stop,color);}
return gradient;};RGraph.radialGradient=function()
{var args=arguments[0];var gradient=args.object.context.createRadialGradient(args.x1,args.y1,args.r1,args.x2,args.y2,args.r2);var numColors=args.colors.length;for(var i=0;i<args.colors.length;++i){gradient.addColorStop(i/(numColors-1),args.colors[i]);}
return gradient;};RGraph.clearEventListeners=function()
{var args=RGraph.getArgs(arguments,'id');if(args.id&&args.id==='window'){window.removeEventListener('mousedown',RGraph.window_mousedown_event_listener,false);window.removeEventListener('mouseup',RGraph.window_mouseup_event_listener,false);}else{var canvas=document.getElementById(args.id);canvas.removeEventListener('mouseup',canvas.rgraph_mouseup_event_listener,false);canvas.removeEventListener('mousemove',canvas.rgraph_mousemove_event_listener,false);canvas.removeEventListener('mousedown',canvas.rgraph_mousedown_event_listener,false);canvas.removeEventListener('click',canvas.rgraph_click_event_listener,false);}};RGraph.hidePalette=function()
{var div=RGraph.Registry.get('palette');if(typeof div=='object'&&div){div.style.visibility='hidden';div.style.display='none';RGraph.Registry.set('palette',null);}};RGraph.random=function()
{var args=RGraph.getArgs(arguments,'min,max,decimals');var dp=args.decimals?args.decimals:0;var r=Math.random();return Number((((args.max-args.min)*r)+args.min).toFixed(dp));};RGraph.arrayRandom=function()
{var args=RGraph.getArgs(arguments,'count,min,max,decimals');for(var i=0,arr=[];i<args.count;i+=1){arr.push(RGraph.random(args.min,args.max,args.decimals));}
return arr;};RGraph.noShadow=function()
{var args=RGraph.getArgs(arguments,'object');args.object.context.shadowColor='rgba(0,0,0,0)';args.object.context.shadowBlur=0;args.object.context.shadowOffsetx=0;args.object.context.shadowOffsety=0;};RGraph.setShadow=function()
{if(typeof arguments[0]==='object'&&typeof arguments[0].object==='object'&&typeof arguments[0].object.isrgraph&&typeof arguments[0].prefix==='string'){var args=arguments[0];args.object.context.shadowColor=args.object.properties[args.prefix+'Color'];args.object.context.shadowOffsetX=args.object.properties[args.prefix+'Offsetx'];args.object.context.shadowOffsetY=args.object.properties[args.prefix+'Offsety'];args.object.context.shadowBlur=args.object.properties[args.prefix+'Blur'];}else if(arguments.length===1&&typeof arguments[0]==='object'&&typeof arguments[0].isrgraph){var obj=arguments[0];obj.context.shadowColor='rgba(0,0,0,0)';obj.context.shadowOffsetX=0;obj.context.shadowOffsetY=0;obj.context.shadowBlur=0;}else{var obj=arguments[0];obj.context.shadowColor=arguments[1];obj.context.shadowOffsetX=arguments[2];obj.context.shadowOffsetY=arguments[3];obj.context.shadowBlur=arguments[4];}};RGraph.Registry.set=function()
{var args=RGraph.getArgs(arguments,'name,value');args.name=args.name.replace(/([A-Z])/g,function(str)
{return'.'+String(RegExp.$1).toLowerCase();});RGraph.Registry.store[args.name]=args.value;return args.value;};RGraph.Registry.get=function()
{var args=RGraph.getArgs(arguments,'name');args.name=args.name.replace(/([A-Z])/g,function(str)
{return'.'+String(RegExp.$1).toLowerCase();});return RGraph.Registry.store[args.name];};RGraph.toRadians=function()
{var args=RGraph.getArgs(arguments,'degrees');return args.degrees*(RGraph.PI/180);};RGraph.toDegrees=function()
{var args=RGraph.getArgs(arguments,'radians');return args.radians*(180/Math.PI);};RGraph.log=function()
{var args=RGraph.getArgs(arguments,'number,base');return Math.log(args.number)/(args.base?Math.log(args.base):1);};RGraph.isArray=function()
{var args=RGraph.getArgs(arguments,'object');if(args.object&&args.object.constructor){var pos=args.object.constructor.toString().indexOf('Array');}else{return false;}
return args.object!=null&&typeof pos==='number'&&pos>0&&pos<20;};RGraph.trim=function()
{var args=RGraph.getArgs(arguments,'str');return RGraph.ltrim(RGraph.rtrim(args.str));};RGraph.ltrim=function()
{var args=RGraph.getArgs(arguments,'str');return args.str.replace(/^(\s|\0)+/,'');};RGraph.rtrim=function()
{var args=RGraph.getArgs(arguments,'str');return args.str.replace(/(\s|\0)+$/,'');};RGraph.isNull=function()
{var args=RGraph.getArgs(arguments,'arg');if(typeof args.arg==='object'&&!args.arg){return true;}
return false;};RGraph.async=function()
{var args=RGraph.getArgs(arguments,'func,delay');return setTimeout(args.func,args.delay?args.delay:1);};RGraph.reset=function()
{var args=RGraph.getArgs(arguments,'canvas');args.canvas.width=args.canvas.width;RGraph.ObjectRegistry.clear(args.canvas);args.canvas.__rgraph_aa_translated__=false;if(RGraph.text.domNodeCache&&RGraph.text.domNodeCache.reset){RGraph.text.domNodeCache.reset(args.canvas);}
if(!RGraph.text.domNodeCache){RGraph.text.domNodeCache=[];}
if(!RGraph.text.domNodeDimensionCache){RGraph.text.domNodeDimensionCache=[];}
RGraph.text.domNodeCache[args.canvas.id]=[];RGraph.text.domNodeDimensionCache[args.canvas.id]=[];};RGraph.Effects.updateCanvas=function()
{var args=RGraph.getArgs(arguments,'func');window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||(function(func){setTimeout(func,16.666);});window.requestAnimationFrame(args.func);};RGraph.Effects.getEasingMultiplier=function()
{var args=RGraph.getArgs(arguments,'frames,frame');return Math.pow(Math.sin((args.frame/args.frames)*RGraph.HALFPI),3);};RGraph.stringsToNumbers=function()
{var args=RGraph.getArgs(arguments,'string,separator');var sep=args.separator||',';if(typeof args.string==='number'){return args.string;}
if(typeof args.string==='string'){if(args.string.indexOf(sep)!=-1){args.string=args.string.split(sep);}else{args.string=parseFloat(args.string);}}
if(typeof args.string==='object'&&!RGraph.isNull(args.string)){for(var i=0,len=args.string.length;i<len;i+=1){args.string[i]=parseFloat(args.string[i]);}}
return args.string;};RGraph.cachedDraw=function()
{var args=RGraph.getArgs(arguments,'object,id,function');if(!RGraph.cache[args.id]){RGraph.cache[args.id]={};RGraph.cache[args.id].object=args.object;RGraph.cache[args.id].canvas=document.createElement('canvas');RGraph.cache[args.id].canvas.setAttribute('width',args.object.canvas.width);RGraph.cache[args.id].canvas.setAttribute('height',args.object.canvas.height);RGraph.cache[args.id].canvas.setAttribute('id','background_cached_canvas'+args.object.canvas.id);RGraph.cache[args.id].canvas.__object__=args.object;RGraph.cache[args.id].context=RGraph.cache[args.id].canvas.getContext('2d');RGraph.cache[args.id].context.translate(0.5,0.5);args.function(args.object,RGraph.cache[args.id].canvas,RGraph.cache[args.id].context);}
args.object.context.drawImage(RGraph.cache[args.id].canvas,-0.5,-0.5);};RGraph.parseObjectStyleConfig=function()
{var args=RGraph.getArgs(arguments,'object,config');for(var i in args.config){if(typeof i==='string'){args.object.set(i,args.config[i]);}}};RGraph.path=function(args)
{var arguments=Array.prototype.slice.call(arguments);if(arguments.length===1&&args.object&&args.path){var context=args.object.context;var p=args.path;var args=args.args;}else if(arguments.length===1&&args.context&&args.path){var context=args.context;var p=args.path;var args=args.args;}else if(arguments.length>=2&&arguments[0].isrgraph&&arguments[0].context){var context=arguments[0].context;var p=arguments[1];var args=arguments.length>2?arguments.slice(2):[];}else if(arguments.length>=2&&arguments[0].toString().indexOf('Context')){var context=arguments[0];var p=arguments[1];var args=arguments.length>2?arguments.slice(2):[];}
if(typeof p==='string'){p=splitstring(p);}
RGraph.path.last=RGraph.arrayClone(p);for(var i=0,len=p.length;i<len;i+=1){switch(p[i]){case'b':context.beginPath();break;case'c':context.closePath();break;case'm':context.moveTo(parseFloat(p[i+1]),parseFloat(p[i+2]));i+=2;break;case'l':context.lineTo(parseFloat(p[i+1]),parseFloat(p[i+2]));i+=2;break;case's':if(p[i+1])context.strokeStyle=p[i+1];context.stroke();i++;break;case'f':if(p[i+1]){context.fillStyle=p[i+1];}context.fill();i++;break;case'qc':context.quadraticCurveTo(parseFloat(p[i+1]),parseFloat(p[i+2]),parseFloat(p[i+3]),parseFloat(p[i+4]));i+=4;break;case'bc':context.bezierCurveTo(parseFloat(p[i+1]),parseFloat(p[i+2]),parseFloat(p[i+3]),parseFloat(p[i+4]),parseFloat(p[i+5]),parseFloat(p[i+6]));i+=6;break;case'r':context.rect(parseFloat(p[i+1]),parseFloat(p[i+2]),parseFloat(p[i+3]),parseFloat(p[i+4]));i+=4;break;case'a':context.arc(parseFloat(p[i+1]),parseFloat(p[i+2]),parseFloat(p[i+3]),parseFloat(p[i+4]),parseFloat(p[i+5]),p[i+6]==='true'||p[i+6]===true||p[i+6]===1||p[i+6]==='1'?true:false);i+=6;break;case'at':context.arcTo(parseFloat(p[i+1]),parseFloat(p[i+2]),parseFloat(p[i+3]),parseFloat(p[i+4]),parseFloat(p[i+5]));i+=5;break;case'lw':context.lineWidth=parseFloat(p[i+1]);i++;break;case'e':context.ellipse(parseFloat(p[i+1]),parseFloat(p[i+2]),parseFloat(p[i+3]),parseFloat(p[i+4]),parseFloat(p[i+5]),parseFloat(p[i+6]),parseFloat(p[i+7]),p[i+8]==='true'?true:false);i+=8;break;case'lj':context.lineJoin=p[i+1];i++;break;case'lc':context.lineCap=p[i+1];i++;break;case'sc':context.shadowColor=p[i+1];i++;break;case'sb':context.shadowBlur=parseFloat(p[i+1]);i++;break;case'sx':context.shadowOffsetX=parseFloat(p[i+1]);i++;break;case'sy':context.shadowOffsetY=parseFloat(p[i+1]);i++;break;case'fs':context.fillStyle=p[i+1];i++;break;case'ss':context.strokeStyle=p[i+1];i++;break;case'fr':context.fillRect(parseFloat(p[i+1]),parseFloat(p[i+2]),parseFloat(p[i+3]),parseFloat(p[i+4]));i+=4;break;case'sr':context.strokeRect(parseFloat(p[i+1]),parseFloat(p[i+2]),parseFloat(p[i+3]),parseFloat(p[i+4]));i+=4;break;case'cl':context.clip();break;case'sa':context.save();break;case'rs':context.restore();break;case'tr':context.translate(parseFloat(p[i+1]),parseFloat(p[i+2]));i+=2;break;case'sl':context.scale(parseFloat(p[i+1]),parseFloat(p[i+2]));i+=2;break;case'ro':context.rotate(parseFloat(p[i+1]));i++;break;case'tf':context.transform(parseFloat(p[i+1]),parseFloat(p[i+2]),parseFloat(p[i+3]),parseFloat(p[i+4]),parseFloat(p[i+5]),parseFloat(p[i+6]));i+=6;break;case'stf':context.setTransform(parseFloat(p[i+1]),parseFloat(p[i+2]),parseFloat(p[i+3]),parseFloat(p[i+4]),parseFloat(p[i+5]),parseFloat(p[i+6]));i+=6;break;case'cr':context.clearRect(parseFloat(p[i+1]),parseFloat(p[i+2]),parseFloat(p[i+3]),parseFloat(p[i+4]));i+=4;break;case'ld':var parts=p[i+1];context.setLineDash(parts);i+=1;break;case'ldo':context.lineDashOffset=p[i+1];i++;break;case'fo':context.font=p[i+1];i++;break;case'ft':context.fillText(p[i+1],parseFloat(p[i+2]),parseFloat(p[i+3]));i+=3;break;case'st':context.strokeText(p[i+1],parseFloat(p[i+2]),parseFloat(p[i+3]));i+=3;break;case'ta':context.textAlign=p[i+1];i++;break;case'tbl':context.textBaseline=p[i+1];i++;break;case'ga':context.globalAlpha=parseFloat(p[i+1]);i++;break;case'gco':context.globalCompositeOperation=p[i+1];i++;break;case'fu':(p[i+1])(context.canvas.__object__);i++;break;case'':break;default:alert('[ERROR] Unknown option: '+p[i]);}}
function splitstring(p)
{var ret=[],buffer='',inquote=false,quote='',substitutionIndex=0;for(var i=0;i<p.length;i+=1){var chr=p[i],isWS=chr.match(/ /);if(isWS){if(!inquote){if(buffer[0]==='"'||buffer[0]==="'"){buffer=buffer.substr(1,buffer.length-2);}
if(buffer.trim()==='%'&&typeof args[substitutionIndex]!=='undefined'){buffer=args[substitutionIndex++];}
ret.push(buffer);buffer='';}else{buffer+=chr;}}else{if(chr==="'"||chr==='"'){inquote=!inquote;}
buffer+=chr;}}
if(buffer.trim()==='%'&&args[substitutionIndex]){buffer=args[substitutionIndex++];}
ret.push(buffer);return ret;}};RGraph.getTextConf=function(args)
{var obj=args.object,prop=obj.properties,prefix=args.prefix;var font=typeof prop[prefix+'Font']==='string'?prop[prefix+'Font']:prop.textFont,size=typeof prop[prefix+'Size']==='number'?prop[prefix+'Size']:prop.textSize,color=typeof prop[prefix+'Color']==='string'?prop[prefix+'Color']:prop.textColor,bold=!RGraph.isNull(prop[prefix+'Bold'])?prop[prefix+'Bold']:prop.textBold,italic=!RGraph.isNull(prop[prefix+'Italic'])?prop[prefix+'Italic']:prop.textItalic;return{font:font,size:size,color:color,bold:bold,italic:italic};};RGraph.responsive=function(conf)
{var args=arguments[1]||{},obj=this,func=null,timer=null;args.delay=typeof args.delay==='number'?args.delay:200;var func=function()
{var matched=false;for(var i=0;i<conf.length;++i){if(!matched&&(document.documentElement.clientWidth<=conf[i].maxWidth||RGraph.isNull(conf[i].maxWidth))){matched=true;if(typeof conf[i].width==='number'){if(obj.get('textAccessible')){obj.canvas.parentNode.style.width=conf[i].width+'px';}
obj.canvas.width=conf[i].width;}
if(typeof conf[i].height==='number'){if(obj.get('textAccessible')){obj.canvas.parentNode.style.height=conf[i].height+'px';}
obj.canvas.height=conf[i].height;}
if(typeof conf[i].options==='object'&&typeof conf[i].options==='object'){for(var j in conf[i].options){if(typeof j==='string'){obj.set(j,conf[i].options[j]);}}}
var setCSS=function(el,name,value)
{var replacements=[['float','cssFloat']];for(var i=0;i<replacements.length;++i){if(name===replacements[i][0]){name=replacements[i][1];}}
el.style[name]=value;};if(typeof conf[i].css==='object'){for(var j in conf[i].css){if(typeof j==='string'){if(obj.get('textAccessible')){setCSS(obj.canvas.parentNode,j,conf[i].css[j]);}else{setCSS(obj.canvas,j,conf[i].css[j]);}}}}
if(typeof conf[i].parentCss==='object'){for(var j in conf[i].parentCss){if(typeof j==='string'){if(obj.get('textAccessible')){setCSS(obj.canvas.parentNode.parentNode,j,conf[i].parentCss[j]);}else{setCSS(obj.canvas.parentNode,j,conf[i].parentCss[j])}}}}
RGraph.cache=[];RGraph.resetColorsToOriginalValues(obj);if(obj.get('textAccessible')){RGraph.text.domNodeCache.reset(obj.canvas);}
RGraph.redraw();if(typeof conf[i].callback==='function'){(conf[i].callback)(obj);}}}}
RGraph.responsive.window_resize_event_listener=function()
{if(args.delay>0){clearTimeout(timer);timer=setTimeout(func,args.delay);}else{func();}};window.addEventListener('resize',RGraph.responsive.window_resize_event_listener,false);func();return obj;};RGraph.pathObjectFunction=function()
{if(arguments.length===1&&typeof arguments[0]==='object'){var args=RGraph.getArgs(arguments,'path,args');RGraph.path({object:this,path:args.path,args:args.args});}else{var args=Array.prototype.slice.call(arguments,1);RGraph.path({object:this,path:arguments[0],args:args});}};RGraph.drawXAxis=function(obj)
{var prop=obj.properties,context=obj.context,tickmarksLength=(typeof prop.xaxisTickmarksLength==='number'?prop.xaxisTickmarksLength:3),isSketch=(obj.type==='bar'&&prop.variant==='sketch');if(typeof prop.xaxisLabels==='object'&&!RGraph.isNull(prop.xaxisLabels)&&prop.xaxisLabels.length){for(var i=0;i<prop.xaxisLabels.length;++i){if(typeof prop.xaxisLabels[i]==='undefined'||prop.xaxisLabels[i]===null){prop.xaxisLabels[i]='';}}}
if((obj.type==='hbar'||obj.type==='gantt')&&prop.xaxisPosition==='bottom'){var y=obj.canvas.height-prop.marginBottom;}else if((obj.type==='hbar'||obj.type==='gantt')&&prop.xaxisPosition==='top'){var y=prop.marginTop;}else{var y=obj.getYCoord(prop.yaxisScaleMin>0?prop.yaxisScaleMin:0);}
if(obj.type==='line'&&prop.yaxisScaleInvert&&prop.yaxisScaleMin===0){y=obj.getYCoord(obj.scale2.max);}
if(obj.type==='scatter'&&prop.yaxisScaleInvert){if(prop.yaxisScaleMin>=0){y=obj.getYCoord(obj.scale2.max);}}
if(obj.type==='drawing.xaxis'){if(prop.xaxisPosition==='center'){y=((obj.canvas.height-prop.marginTop-prop.marginBottom)/2)+prop.marginTop;}else{y=obj.y;}}
if(prop.xaxis){obj.path('lw % b m % % l % % s %',prop.xaxisLinewidth,prop.marginLeft-(isSketch?5:0),y-(isSketch?2:0),obj.canvas.width-prop.marginRight+(isSketch?7:0),y+(isSketch?2:0),prop.xaxisColor);if(!isSketch){if(prop.xaxisTickmarks){if(typeof prop.xaxisTickmarksCount==='number'){var xaxisTickmarksCount=prop.xaxisTickmarksCount;}else if(obj.type==='bar'){var xaxisTickmarksCount=obj.data.length||10;}else if(obj.type==='hbar'){var xaxisTickmarksCount=(prop.xaxisLabelsCount||5);}else if(obj.type==='line'){var xaxisTickmarksCount=obj.data[0].length>0?obj.data[0].length-1:10;}else if(obj.type==='scatter'&&prop.scale){var xaxisTickmarksCount=5;}else if(obj.type==='scatter'&&prop.xaxisLabels){var xaxisTickmarksCount=prop.xaxisLabels.length;}else if(obj.type==='scatter'){var xaxisTickmarksCount=5;}else if(obj.type==='waterfall'){var xaxisTickmarksCount=obj.data.length+(prop.total?1:0);}else if(obj.type==='drawing.xaxis'){if(prop.scale){var xaxisTickmarksCount=prop.xaxisScaleLabelsCount;}else if(prop.xaxisLabels&&prop.xaxisLabels.length){var xaxisTickmarksCount=prop.xaxisLabels.length;}else{var xaxisTickmarksCount=5;}}else{xaxisTickmarksCount=5;}}else{prop.xaxisTickmarksCount=0;}
if(prop.xaxisPosition==='center'&&prop.yaxisScaleMin>=0){if(prop.yaxisScaleInvert){var tickmarksYStart=obj.getYCoord(prop.yaxisScaleMax)-tickmarksLength;var tickmarksYEnd=obj.getYCoord(prop.yaxisScaleMax)+tickmarksLength;}else{var tickmarksYStart=obj.getYCoord(prop.yaxisScaleMin)-tickmarksLength;var tickmarksYEnd=obj.getYCoord(prop.yaxisScaleMin)+tickmarksLength;}}else if(prop.xaxisPosition==='center'||prop.yaxisScaleMin<0){if(prop.yaxisScaleInvert){var tickmarksYStart=obj.getYCoord(obj.scale2.max)-tickmarksLength;var tickmarksYEnd=obj.getYCoord(obj.scale2.max)+tickmarksLength;}else{var tickmarksYStart=obj.getYCoord(0)-tickmarksLength;var tickmarksYEnd=obj.getYCoord(0)+tickmarksLength;}
if(prop.yaxisScaleMin<0&&prop.yaxisScaleMax>0){var tickmarksYStart=obj.getYCoord(0)-tickmarksLength;var tickmarksYEnd=obj.getYCoord(0)+tickmarksLength;}}else if(prop.xaxisPosition==='top'){if(obj.getYCoord){var tickmarksYStart=obj.getYCoord(0)-tickmarksLength;var tickmarksYEnd=obj.getYCoord(0);}else{var tickmarksYStart=prop.marginTop-tickmarksLength;var tickmarksYEnd=prop.marginTop;}}else{if(obj.getYCoord){if(obj.type==='line'&&prop.yaxisScaleInvert){var tickmarksYStart=obj.getYCoord(obj.scale2.max);var tickmarksYEnd=obj.getYCoord(obj.scale2.max)+tickmarksLength;}else if(obj.type==='scatter'&&prop.yaxisScaleInvert){var tickmarksYStart=obj.getYCoord(obj.scale2.max);var tickmarksYEnd=obj.getYCoord(obj.scale2.max)+tickmarksLength;}else if(obj.type==='drawing.xaxis'){tickmarksYStart=obj.y;tickmarksYEnd=obj.y+tickmarksLength;}else{var tickmarksYStart=obj.getYCoord(prop.yaxisScaleMin);var tickmarksYEnd=obj.getYCoord(prop.yaxisScaleMin)+tickmarksLength;}}else{var tickmarksYStart=obj.canvas.height-prop.marginBottom;var tickmarksYEnd=obj.canvas.height-prop.marginBottom+tickmarksLength;}}
for(var i=0;i<=xaxisTickmarksCount;++i){if(RGraph.isNull(prop.xaxisTickmarksLastLeft)){if(i===0&&prop.yaxis&&prop.yaxisPosition==='left'&&!(prop.xaxisScaleMax>0&&prop.xaxisScaleMin<0)){continue;}}else if(i===0&&!prop.xaxisTickmarksLastLeft){continue;}
if(RGraph.isNull(prop.xaxisTickmarksLastRight)){if(i===xaxisTickmarksCount&&prop.yaxis&&prop.yaxisPosition==='right'){continue;}}else if(i===xaxisTickmarksCount&&!prop.xaxisTickmarksLastRight){continue;}
var x=(((obj.canvas.width-prop.marginLeft-prop.marginRight)/xaxisTickmarksCount)*i)+prop.marginLeft;if(obj.type==='hbar'){if(prop.yaxisPosition==='center'&&x>obj.getXCoord(0)-2&&x<obj.getXCoord(0)+2){continue;}else if(prop.yaxisPosition==='left'&&prop.xaxisScaleMin<0&&prop.xaxisScaleMax>0&&x>obj.getXCoord(0)-2&&x<obj.getXCoord(0)+2){continue;}}
obj.path('b m % % l % % s %',x,tickmarksYStart,x,tickmarksYEnd,prop.xaxisColor);}}}
if(prop.xaxisLabelsAngle!=0){var valign='center';var halign='right';var angle=0-prop.xaxisLabelsAngle;if(prop.xaxisPosition==='top'){var angle=prop.xaxisLabelsAngle;}}else{var valign='top';var halign='center';var angle=0;}
if(prop.xaxisScale){var scale=obj.scale2;if(obj.type==='scatter'){scale=obj.xscale2;}else if(obj.type==='drawing.xaxis'){if(prop.xaxisScale){scale=RGraph.getScale({object:this,options:{'scale.max':prop.xaxisScaleMax,'scale.min':prop.xaxisScaleMin,'scale.decimals':Number(prop.xaxisScaleDecimals),'scale.point':prop.xaxisScalePoint,'scale.thousand':prop.xaxisScaleThousand,'scale.round':prop.xaxisScaleRound,'scale.units.pre':prop.xaxisScaleUnitsPre,'scale.units.post':prop.xaxisScaleUnitsPost,'scale.labels.count':prop.xaxisScaleLabelsCount,'scale.strict':true}});for(var i=0;i<=prop.xaxisScaleLabelsCount;++i){var original=(((prop.xaxisScaleMax-prop.xaxisScaleMin)/prop.xaxisScaleLabelsCount)*i)+prop.xaxisScaleMin;var hmargin=prop.marginInner;if(typeof prop.xaxisScaleFormatter==='function'){var text=(prop.xaxisScaleFormatter)(this,original)}else{text=RGraph.numberFormat({object:obj,number:original.toFixed(original===0?0:prop.xaxisScaleDecimals),unitspre:prop.xaxisScaleUnitsPre,unitspost:prop.xaxisScaleUnitsPost,point:prop.xaxisScalePoint,thousand:prop.xaxisScaleThousand});}}}}
for(var i=0;i<scale.labels.length;++i){var section=(obj.canvas.width-prop.marginLeft-prop.marginRight)/scale.labels.length;if(prop.yaxisPosition==='right'){var x=prop.marginLeft+(section*i);}else if(prop.yaxisPosition==='center'){section/=2;var x=obj.getXCoord(0)+section+(section*i);}else{var x=prop.marginLeft+(section*i)+section;}
var y=prop.xaxisPosition==='top'?obj.marginTop-(prop.xaxisTickmarksLength||0)+prop.xaxisLabelsOffsety-5:(obj.canvas.height-prop.marginBottom)+(prop.xaxisTickmarksLength||0)+prop.xaxisLabelsOffsety+5;if(obj.type==='drawing.xaxis'){if(prop.xaxisPosition==='top'){y=obj.y-(prop.xaxisTickmarksLength||0)+prop.xaxisLabelsOffsety;}else{y=obj.y+(prop.xaxisTickmarksLength||0)+prop.xaxisLabelsOffsety+5;}}
RGraph.text({object:obj,textConfPrefix:'xaxisLabels',x:x+prop.xaxisLabelsOffsetx,y:y,text:typeof prop.xaxisScaleFormatter==='function'?(prop.xaxisScaleFormatter)({object:obj,number:scale.values[i]}):(prop.yaxisPosition==='right'?String(scale.labels[scale.labels.length-1-i]):String(scale.labels[i])),valign:typeof prop.xaxisLabelsValign==='string'?prop.xaxisLabelsValign:(prop.xaxisPosition==='top'?'bottom':valign),halign:typeof prop.xaxisLabelsHalign==='string'?prop.xaxisLabelsHalign:halign,marker:false,angle:angle,tag:'xaxis.labels'});if(obj.type==='hbar'&&prop.yaxisPosition==='center'){x=obj.getXCoord(0)-section-(section*i);RGraph.text({object:obj,textConfPrefix:'xaxisLabels',x:x+prop.xaxisLabelsOffsetx,y:prop.xaxisPosition==='top'?obj.marginTop-(prop.xaxisTickmarksLength||0)+prop.xaxisLabelsOffsety-5:(obj.canvas.height-prop.marginBottom)+(prop.xaxisTickmarksLength||0)+prop.xaxisLabelsOffsety+5,text:typeof prop.xaxisScaleFormatter==='function'?(prop.xaxisScaleFormatter)({object:obj,number:scale.values[i]}):'-'+String(scale.labels[i]),valign:typeof prop.xaxisLabelsValign==='string'?prop.xaxisLabelsValign:(prop.xaxisPosition==='top'?'bottom':valign),halign:typeof prop.xaxisLabelsHalign==='string'?prop.xaxisLabelsHalign:halign,marker:false,angle:angle,tag:'xaxis.labels'});}
var str=((prop.xaxisScaleUnitsPre||'')+prop.xaxisScaleMin.toFixed(prop.xaxisScaleDecimals).replace(/\./,prop.xaxisScalePoint)+(prop.xaxisScaleUnitsPost||''));;str=str.replace(/^(.+)-(\d)/,'-$1$2');RGraph.text({object:obj,textConfPrefix:'xaxisLabels',x:prop.yaxisPosition==='right'?obj.canvas.width-prop.marginRight+prop.xaxisLabelsOffsetx:(prop.yaxisPosition==='center'?obj.getXCoord(0)+prop.xaxisLabelsOffsetx:prop.marginLeft+prop.xaxisLabelsOffsetx),y:y,text:typeof prop.xaxisScaleFormatter==='function'?(prop.xaxisScaleFormatter)({object:obj,number:0}):str,valign:typeof prop.xaxisLabelsValign==='string'?prop.xaxisLabelsValign:(typeof prop.xaxisLabelsValign==='string'?prop.xaxisLabelsValign:(prop.xaxisPosition==='top'?'bottom':valign)),halign:typeof prop.xaxisLabelsHalign==='string'?prop.xaxisLabelsHalign:halign,marker:false,angle:angle,tag:'xaxis.labels'});}}else if(prop.xaxisLabels&&prop.xaxisLabels.length&&(prop.xaxisLabelsPosition==='section'||prop.xaxisLabelsPosition==='edge')){if(prop.xaxisLabelsPosition==='edge'){var section=(obj.canvas.width-prop.marginLeft-prop.marginRight-(prop.marginInner||0)-(prop.marginInner||0))/(prop.xaxisLabels.length-1);}else{var section=(obj.canvas.width-prop.marginLeft-prop.marginRight)/prop.xaxisLabels.length;}
for(var i=0;i<prop.xaxisLabels.length;++i){if(prop.xaxisLabelsPosition==='edge'){var x=prop.marginLeft+(prop.marginInner||0)+(section*i);}else{var x=prop.marginLeft+(section*i)+(section/2);}
if(typeof prop.xaxisLabels[i]==='object'&&obj.type==='scatter'){var rightEdge=0;var align=prop.xaxisLabelsSpecificAlign==='left'?'left':'center';var halign='center'
if(prop.xaxisLabels[i+1]&&typeof prop.xaxisLabels[i+1][1]==='number'){rightEdge=prop.xaxisLabels[i+1][1];}else{rightEdge=prop.xaxisScaleMax;}
var leftEdge=prop.xaxisLabels[i][1];var x=((obj.getXCoord(rightEdge)-obj.getXCoord(leftEdge))/2)+obj.getXCoord(leftEdge);if(align==='left'){x=obj.getXCoord(leftEdge);halign='left';}
if(RGraph.isNull(x)){continue;}
if(obj.type==='drawing.xaxis'){if(prop.xaxisPosition==='top'){y=obj.y-(prop.xaxisTickmarksLength||0)+prop.xaxisLabelsOffsety;}else{y=obj.y+(prop.xaxisTickmarksLength||0)+prop.xaxisLabelsOffsety+5;}}
RGraph.text({object:obj,textConfPrefix:'xaxisLabels',x:x+5+prop.xaxisLabelsOffsetx,y:y+5+prop.xaxisLabelsOffsety,valign:valign,halign:angle!=0?'right':halign,text:String(prop.xaxisLabels[i][0]),angle:angle,marker:false,tag:'labels.specific'});obj.path('b m % % l % % s #bbb',Math.round(prop.marginLeft+(((prop.xaxisLabels[i][1]-prop.xaxisScaleMin)/(prop.xaxisScaleMax-prop.xaxisScaleMin))*(obj.canvas.width-prop.marginLeft-prop.marginRight))),obj.canvas.height-prop.marginBottom,Math.round(prop.marginLeft+(((prop.xaxisLabels[i][1]-prop.xaxisScaleMin)/(prop.xaxisScaleMax-prop.xaxisScaleMin)))*(obj.canvas.width-prop.marginLeft-prop.marginRight)),obj.canvas.height-prop.marginBottom+20);if(i===prop.xaxisLabels.length-1){obj.path('b m % % l % % s #bbb',obj.canvas.width-prop.marginRight,obj.canvas.height-prop.marginBottom,obj.canvas.width-prop.marginRight,obj.canvas.height-prop.marginBottom+20);}}else{var y=prop.xaxisPosition==='top'?prop.marginTop+prop.xaxisLabelsOffsety-5:(obj.canvas.height-prop.marginBottom)+prop.xaxisLabelsOffsety+5;if(obj.type==='drawing.xaxis'){if(obj.type==='drawing.xaxis'){if(prop.xaxisPosition==='top'){y=obj.y-(prop.xaxisTickmarksLength||0)+prop.xaxisLabelsOffsety;}else{y=obj.y+(prop.xaxisTickmarksLength||0)+prop.xaxisLabelsOffsety+5;}}}
RGraph.text({object:obj,textConfPrefix:'xaxisLabels',x:x+prop.xaxisLabelsOffsetx,y:y+prop.xaxisLabelsOffsety,text:String(prop.xaxisLabels[i]),valign:typeof prop.xaxisLabelsValign==='string'?prop.xaxisLabelsValign:(prop.xaxisPosition==='top'?'bottom':valign),halign:typeof prop.xaxisLabelsHalign==='string'?prop.xaxisLabelsHalign:halign,marker:false,angle:angle,tag:'xaxis.labels'});}}}
if(prop.xaxisTitle){var x=prop.marginLeft+((obj.canvas.width-prop.marginLeft-prop.marginRight)/2)+prop.xaxisTitleOffsetx;var y=prop.xaxisPosition==='top'?prop.marginTop-7+prop.xaxisTitleOffsety-prop.xaxisTickmarksLength:obj.canvas.height-prop.marginBottom+7+prop.xaxisTitleOffsety+prop.xaxisTickmarksLength;if(obj.type==='drawing.xaxis'){y=obj.y+7+prop.xaxisTitleOffsety+prop.xaxisTickmarksLength;}
if(prop.xaxisScale||(prop.xaxisLabels&&prop.xaxisLabels.length)){var textConf=RGraph.getTextConf({object:obj,prefix:'xaxisLabels'});if(prop.xaxisPosition==='top'){y-=textConf.size*1.5;}else{y+=textConf.size*1.5;}}
if(typeof prop.xaxisTitlePos==='number'){if(prop.xaxisPosition==='top'){y=prop.marginTop*prop.xaxisTitlePos;}else{y=obj.canvas.height-prop.marginBottom+(prop.marginBottom*prop.xaxisTitlePos);}}
if(typeof prop.xaxisTitleX==='number')x=prop.xaxisTitleX;if(typeof prop.xaxisTitleY==='number')y=prop.xaxisTitleY;RGraph.text({object:obj,textConfPrefix:'xaxisTitle',x:x,y:y,text:prop.xaxisTitle.toString(),valign:prop.xaxisPosition==='top'?(prop.xaxisTitleValign||'bottom'):(prop.xaxisTitleValign||'top'),halign:prop.xaxisTitleHalign||'center',marker:false,tag:'xaxis.title'});}};RGraph.drawYAxis=function(obj)
{var prop=obj.properties,context=obj.context,isSketch=obj.type==='bar'&&prop.variant==='sketch';tickmarksLength=typeof prop.yaxisTickmarksLength==='number'?prop.yaxisTickmarksLength:3;if(obj.type==='hbar'){prop.yaxisLabelsSpecific=prop.yaxisLabels;}
if((obj.type==='hbar'||obj.type==='gantt')&&prop.yaxisPosition==='left'){var x=obj.getXCoord(0);}else if((obj.type==='hbar'||obj.type==='gantt')&&prop.yaxisPosition==='right'){var x=obj.canvas.width-prop.marginRight;}else if(obj.type==='drawing.yaxis'){var x=obj.x;}else{var x=prop.yaxisPosition==='right'?obj.canvas.width-prop.marginRight:(obj.type==='hbar'?obj.getXCoord(0):prop.marginLeft);}
if(prop.yaxis){obj.path('lw % b m % % l % % s %',prop.yaxisLinewidth,x-(isSketch?5:0),prop.marginTop-(isSketch?2:0),x+(isSketch?7:0),obj.canvas.height-prop.marginBottom+(isSketch?2:0),prop.yaxisColor);if(!isSketch){if(prop.yaxisTickmarks){if(typeof prop.yaxisTickmarksCount==='number'){var yaxisTickmarksCount=prop.yaxisTickmarksCount;}else if(obj.type==='bar'){var yaxisTickmarksCount=prop.yaxisLabelsSpecific?prop.yaxisLabelsSpecific.length-1:prop.yaxisLabelsCount;}else if(obj.type==='hbar'){var yaxisTickmarksCount=obj.data.length||5;}else if(obj.type==='line'){var yaxisTickmarksCount=prop.yaxisLabelsSpecific?prop.yaxisLabelsSpecific.length-1:prop.yaxisLabelsCount;}else if(obj.type==='scatter'){var yaxisTickmarksCount=prop.yaxisLabelsCount;}else if(obj.type==='waterfall'){var yaxisTickmarksCount=prop.yaxisLabelsCount;}else{yaxisTickmarksCount=5;}}else{prop.yaxisTickmarksCount=0;}
if(prop.yaxisPosition==='right'){var tickmarksXStart=x;var tickmarksXEnd=x+tickmarksLength;}else{var tickmarksXStart=x;var tickmarksXEnd=x-tickmarksLength;}
if(obj.type==='hbar'&&prop.xaxisScaleMin<0&&prop.xaxisScaleMax>0){var tickmarksXStart=obj.getXCoord(0)-tickmarksLength;var tickmarksXEnd=obj.getXCoord(0)+tickmarksLength;}
for(var i=0;i<=yaxisTickmarksCount;++i){if(RGraph.isNull(prop.yaxisTickmarksLastTop)){if(i===0&&prop.xaxis&&prop.xaxisPosition==='top'){continue;}}else if(i===0&&!prop.yaxisTickmarksLastTop){continue;}
if(RGraph.isNull(prop.yaxisTickmarksLastBottom)){if(i===yaxisTickmarksCount&&prop.xaxis&&prop.xaxisPosition==='bottom'){continue;}}else if(i===yaxisTickmarksCount&&!prop.yaxisTickmarksLastBottom){continue;}
var y=(((obj.canvas.height-prop.marginTop-prop.marginBottom)/yaxisTickmarksCount)*i)+prop.marginTop;if(obj.getYCoord){var xaxisYCoord=obj.getYCoord(0);}else if(obj.getXCoord){var xaxisYCoord=obj.getXCoord(0);}else{var xaxisYCoord=obj.marginTop;}
if(prop.xaxis&&(prop.xaxisPosition==='center'||(prop.xaxisPosition==='bottom'&&prop.yaxisScaleMin<0&&prop.yaxisScaleMax>0))&&y>(xaxisYCoord-1)&&y<(xaxisYCoord+1)){continue;}
obj.path('b m % % l % % s %',tickmarksXStart,y,tickmarksXEnd,y,prop.yaxisColor);if(prop.yaxisScaleMin<0&&prop.yaxisScaleMax>0){obj.path('b m % % l % % s %',tickmarksXStart,obj.canvas.height-prop.marginBottom,tickmarksXEnd,obj.canvas.height-prop.marginBottom,prop.yaxisColor);}
if(obj.type==='scatter'&&prop.xaxisPosition==='center'&&prop.yaxisScaleInvert){obj.path('b m % % l % % s %',tickmarksXStart,prop.marginTop,tickmarksXEnd,prop.marginTop,prop.yaxisColor);}}}}
var valign='center',halign='right',angle=0;if(prop.yaxisScale&&!prop.yaxisLabelsSpecific){if(obj.type==='drawing.yaxis'){if(prop.yaxisScale){obj.scale2=RGraph.getScale({object:obj,options:{'scale.max':prop.yaxisScaleMax,'scale.min':prop.yaxisScaleMin,'scale.decimals':Number(prop.yaxisScaleDecimals),'scale.point':prop.yaxisScalePoint,'scale.thousand':prop.yaxisScaleThousand,'scale.round':prop.yaxisScaleRound,'scale.units.pre':prop.yaxisScaleUnitsPre,'scale.units.post':prop.yaxisScaleUnitsPost,'scale.labels.count':prop.yaxisScaleLabelsCount,'scale.strict':true}});for(var i=0;i<=prop.yaxisScaleLabelsCount;++i){var original=(((prop.yaxisScaleMax-prop.yaxisScaleMin)/prop.yaxisScaleLabelsCount)*i)+prop.yaxisScaleMin;var hmargin=prop.marginInner;if(typeof prop.yaxisScaleFormatter==='function'){var text=(prop.yaxisScaleFormatter)(this,original)}else{text=RGraph.numberFormat({object:obj,number:original.toFixed(original===0?0:prop.yaxisScaleDecimals),unitspre:prop.yaxisScaleUnitsPre,unitspost:prop.yaxisScaleUnitsPost,point:prop.yaxisScalePoint,thousand:prop.yaxisScaleThousand});}}}}
var scale=obj.scale2;obj.maxLabelLength=Math.max(obj.maxLabelLength,obj.context.measureText(obj.scale2.labels[4]).width*2);if(prop.xaxisPosition==='center'){var halfHeight=((obj.canvas.height-prop.marginTop-prop.marginBottom)/2);for(var i=0;i<scale.labels.length;++i){var section=(obj.canvas.height-prop.marginTop-prop.marginBottom)/(scale.labels.length*2);var y=prop.marginTop+(section*i);RGraph.text({object:obj,textConfPrefix:'yaxisLabels',x:prop.yaxisPosition==='right'?x+(prop.yaxisTickmarksLength||0)+prop.yaxisLabelsOffsetx+5:x-(prop.yaxisTickmarksLength||0)+prop.yaxisLabelsOffsetx-5,y:prop.yaxisScaleInvert?halfHeight+prop.marginTop-(section*i)+prop.yaxisLabelsOffsety:prop.marginTop+(section*i)+prop.yaxisLabelsOffsety,text:String(scale.labels[scale.labels.length-1-i]),valign:typeof prop.yaxisLabelsValign==='string'?prop.yaxisLabelsValign:valign,halign:typeof prop.yaxisLabelsHalign==='string'?prop.yaxisLabelsHalign:(prop.yaxisPosition==='right'?'left':halign),marker:false,angle:angle,tag:'yaxis.labels'});}
for(var i=0;i<scale.labels.length;++i){if(i===0&&prop.yaxisScaleInvert)continue;var section=(obj.canvas.height-prop.marginTop-prop.marginBottom)/(scale.labels.length*2);var y=prop.marginTop+((obj.canvas.height-prop.marginTop-prop.marginBottom)/2)+(section*i)+section;RGraph.text({object:obj,textConfPrefix:'yaxisLabels',x:prop.yaxisPosition==='right'?x+(prop.yaxisTickmarksLength||0)+prop.yaxisLabelsOffsetx+5:x-(prop.yaxisTickmarksLength||0)+prop.yaxisLabelsOffsetx-5,y:prop.yaxisScaleInvert?halfHeight+prop.marginTop+(section*i):y+prop.yaxisLabelsOffsety,text:'-'+(prop.yaxisScaleInvert?String(scale.labels[scale.labels.length-i-1]):String(scale.labels[i])),valign:typeof prop.yaxisLabelsValign==='string'?prop.yaxisLabelsValign:valign,halign:typeof prop.yaxisLabelsHalign==='string'?prop.yaxisLabelsHalign:(prop.yaxisPosition==='right'?'left':halign),marker:false,angle:angle,tag:'yaxis.labels'});}
RGraph.text({object:obj,textConfPrefix:'yaxisLabels',x:prop.yaxisPosition==='right'?x+5+(prop.yaxisTickmarksLength||0)+prop.yaxisLabelsOffsetx:x-5-(prop.yaxisTickmarksLength||0)+prop.yaxisLabelsOffsetx,y:prop.yaxisScaleInvert?prop.marginTop+prop.yaxisLabelsOffsety:prop.marginTop+((obj.canvas.height-prop.marginBottom-prop.marginTop)/2)+prop.yaxisLabelsOffsety,text:typeof prop.yaxisScaleFormatter==='function'?(prop.yaxisScaleFormatter)({object:this,number:0,unitspre:prop.yaxisScaleUnitsPre,unitspost:prop.yaxisScaleUnitsPost,point:prop.yaxisScalePoint,thousand:prop.yaxisScaleThousand,formatter:prop.yaxisScaleFormatter}):(prop.yaxisScaleUnitsPre||'')+prop.yaxisScaleMin.toFixed(prop.yaxisScaleDecimals).replace(/\./,prop.yaxisScalePoint)+(prop.yaxisScaleUnitsPost||''),valign:typeof prop.yaxisLabelsValign==='string'?prop.yaxisLabelsValign:valign,halign:typeof prop.yaxisLabelsHalign==='string'?prop.yaxisLabelsHalign:(prop.yaxisPosition==='right'?'left':halign),marker:false,angle:angle,tag:'yaxis.labels'});if(prop.yaxisScaleInvert){RGraph.text({object:obj,textConfPrefix:'yaxisLabels',x:prop.yaxisPosition==='right'?x+5+(prop.yaxisTickmarksLength||0)+prop.yaxisLabelsOffsetx:x-5-(prop.yaxisTickmarksLength||0)+prop.yaxisLabelsOffsetx,y:obj.canvas.height-prop.marginBottom+prop.yaxisLabelsOffsety,text:typeof prop.yaxisScaleFormatter==='function'?(prop.yaxisScaleFormatter)({object:this,number:0,unitspre:prop.yaxisScaleUnitsPre,unitspost:prop.yaxisScaleUnitsPost,point:prop.yaxisScalePoint,thousand:prop.yaxisScaleThousand,formatter:prop.yaxisScaleFormatter}):(prop.yaxisScaleUnitsPre||'')+prop.yaxisScaleMin.toFixed(prop.yaxisScaleDecimals).replace(/\./,prop.yaxisScalePoint)+(prop.yaxisScaleUnitsPost||''),valign:typeof prop.yaxisLabelsValign==='string'?prop.yaxisLabelsValign:valign,halign:typeof prop.yaxisLabelsHalign==='string'?prop.yaxisLabelsHalign:(prop.yaxisPosition==='right'?'left':halign),marker:false,angle:angle,tag:'yaxis.labels'});}}else if(prop.xaxisPosition==='top'){for(var i=0;i<scale.labels.length;++i){var section=(obj.canvas.height-prop.marginTop-prop.marginBottom)/scale.labels.length;if(prop.yaxisScaleInvert){var y=obj.canvas.height-prop.marginBottom-(section*i)-section-section;}else{var y=prop.marginTop+(section*i);}
RGraph.text({object:obj,textConfPrefix:'yaxisLabels',x:prop.yaxisPosition==='right'?x+(prop.yaxisTickmarksLength||0)+prop.yaxisLabelsOffsetx+5:x-(prop.yaxisTickmarksLength||0)+prop.yaxisLabelsOffsetx-5,y:y+section+prop.yaxisLabelsOffsety,text:'-'+String(scale.labels[i]),valign:typeof prop.yaxisLabelsValign==='string'?prop.yaxisLabelsValign:valign,halign:typeof prop.yaxisLabelsHalign==='string'?prop.yaxisLabelsHalign:(prop.yaxisPosition==='right'?'left':halign),marker:false,angle:angle,tag:'yaxis.labels'});}
RGraph.text({object:obj,textConfPrefix:'yaxisLabels',x:prop.yaxisPosition==='right'?x+5+(prop.yaxisTickmarksLength||0)+prop.yaxisLabelsOffsetx:x-5-(prop.yaxisTickmarksLength||0)+prop.yaxisLabelsOffsetx,y:prop.yaxisScaleInvert?obj.canvas.height-prop.marginBottom+prop.yaxisLabelsOffsety:prop.marginTop+prop.yaxisLabelsOffsety,text:typeof prop.yaxisScaleFormatter==='function'?(prop.yaxisScaleFormatter)({object:this,number:0,unitspre:prop.yaxisScaleUnitsPre,unitspost:prop.yaxisScaleUnitsPost,point:prop.yaxisScalePoint,thousand:prop.yaxisScaleThousand,formatter:prop.yaxisScaleFormatter}):(prop.yaxisScaleUnitsPre||'')+prop.yaxisScaleMin.toFixed(prop.yaxisScaleDecimals).replace(/\./,prop.yaxisScalePoint)+(prop.yaxisScaleUnitsPost||''),valign:typeof prop.yaxisLabelsValign==='string'?prop.yaxisLabelsValign:valign,halign:typeof prop.yaxisLabelsHalign==='string'?prop.yaxisLabelsHalign:(prop.yaxisPosition==='right'?'left':halign),marker:false,angle:angle,tag:'yaxis.labels'});}else{for(var i=0;i<scale.labels.length;++i){var section=(obj.canvas.height-prop.marginTop-prop.marginBottom)/scale.labels.length;var y=prop.marginTop+(section*(i+(prop.yaxisScaleInvert?1:0)));RGraph.text({object:obj,textConfPrefix:'yaxisLabels',x:prop.yaxisPosition==='right'?x+(prop.yaxisTickmarksLength||0)+prop.yaxisLabelsOffsetx+5:x-(prop.yaxisTickmarksLength||0)+prop.yaxisLabelsOffsetx-5,y:y+prop.yaxisLabelsOffsety,text:String(prop.yaxisScaleInvert?scale.labels[i]:scale.labels[scale.labels.length-1-i]),valign:typeof prop.yaxisLabelsValign==='string'?prop.yaxisLabelsValign:valign,halign:typeof prop.yaxisLabelsHalign==='string'?prop.yaxisLabelsHalign:(prop.yaxisPosition==='right'?'left':halign),marker:false,angle:angle,tag:'yaxis.labels'});}
var zerolabel=RGraph.numberFormat({object:obj,number:prop.yaxisScaleMin.toFixed(prop.yaxisScaleDecimals),unitspre:prop.yaxisScaleUnitsPre,unitspost:prop.yaxisScaleUnitsPost,point:prop.yaxisScalePoint,thousand:prop.yaxisScaleThousand});RGraph.text({object:obj,textConfPrefix:'yaxisLabels',x:prop.yaxisPosition==='right'?x+5+(prop.yaxisTickmarksLength||0)+prop.yaxisLabelsOffsetx:x-5-(prop.yaxisTickmarksLength||0)+prop.yaxisLabelsOffsetx,y:prop.yaxisScaleInvert?prop.marginTop:obj.canvas.height-prop.marginBottom+prop.yaxisLabelsOffsety,text:typeof prop.yaxisScaleFormatter==='function'?(prop.yaxisScaleFormatter)({object:this,number:0,unitspre:prop.yaxisScaleUnitsPre,unitspost:prop.yaxisScaleUnitsPost,point:prop.yaxisScalePoint,thousand:prop.yaxisScaleThousand,formatter:prop.yaxisScaleFormatter}):zerolabel,valign:typeof prop.yaxisLabelsValign==='string'?prop.yaxisLabelsValign:valign,halign:typeof prop.yaxisLabelsHalign==='string'?prop.yaxisLabelsHalign:(prop.yaxisPosition==='right'?'left':halign),marker:false,angle:angle,tag:'yaxis.labels'});}}else if(prop.yaxisLabelsSpecific&&prop.yaxisLabelsSpecific.length&&(prop.yaxisLabelsPosition==='section'||prop.yaxisLabelsPosition==='edge')){var section=(obj.canvas.height-prop.marginTop-prop.marginBottom)/(prop.yaxisLabelsSpecific.length-(prop.yaxisLabelsPosition==='section'?0:1));obj.maxLabelLength=0;for(var i=0;i<prop.yaxisLabelsSpecific.length;++i){var y=prop.marginTop+(section*i)+(prop.yaxisLabelsPosition==='section'?section/2:0);RGraph.text({object:obj,textConfPrefix:'yaxisLabels',x:obj.type==='drawing.yaxis'?(prop.yaxisPosition==='right'?obj.x+7+prop.yaxisLabelsOffsetx:obj.x-5+prop.yaxisLabelsOffsetx):(prop.yaxisPosition==='right'?x+prop.yaxisLabelsOffsetx+5:prop.marginLeft-5+prop.yaxisLabelsOffsetx),y:y+prop.yaxisLabelsOffsety,text:String(prop.yaxisLabelsSpecific[i]||''),valign:typeof prop.yaxisLabelsValign==='string'?prop.yaxisLabelsValign:'center',halign:typeof prop.yaxisLabelsHalign==='string'?prop.yaxisLabelsHalign:(prop.yaxisPosition==='right'?'left':'right'),marker:false,tag:'yaxis.labels'});obj.maxLabelLength=Math.max(obj.maxLabelLength,obj.context.measureText(String(prop.yaxisLabelsSpecific[i])).width*2);}}
if(prop.yaxisTitle){if(obj.type==='gantt'){for(var i=0,maxLabelLength=0;i<prop.yaxisLabels.length;++i){maxLabelLength=Math.max(maxLabelLength,RGraph.measureText(prop.yaxisLabels[i])[0]);}}else if(obj.scale2&&obj.scale2.labels){var maxLabelLength=RGraph.measureText(obj.scale2.labels[obj.scale2.labels.length-1])[0];}
if((obj.type==='hbar'&&prop.yaxisLabels&&prop.yaxisLabels.length)||(obj.type==='drawing.yaxis'&&prop.yaxisLabelsSpecific&&prop.yaxisLabelsSpecific.length)){maxLabelLength=(function(labels)
{for(var i=0,max=0;i<labels.length;++i){var dim=RGraph.measureText(labels[i]);max=Math.max(max,dim[0])}
return max;})(obj.type==='drawing.yaxis'?prop.yaxisLabelsSpecific:prop.yaxisLabels);}
var x=prop.yaxisPosition==='right'?(obj.canvas.width-prop.marginRight)+5+maxLabelLength+10:prop.marginLeft-5-maxLabelLength-10;var y=((obj.canvas.height-prop.marginTop-prop.marginBottom)/2)+prop.marginTop;if(obj.type==='drawing.yaxis'){var x=prop.yaxisPosition==='right'?obj.x+5+maxLabelLength+10:obj.x-5-maxLabelLength-10;}
if(typeof prop.yaxisTitlePos==='number'){if(prop.yaxisPosition==='right'){x=obj.canvas.width-(prop.marginRight*prop.yaxisTitlePos);}else{x=prop.marginLeft*prop.yaxisTitlePos;}}
if(typeof prop.yaxisTitleOffsetx==='number')x+=prop.yaxisTitleOffsetx;if(typeof prop.yaxisTitleOffsety==='number')y+=prop.yaxisTitleOffsety;if(typeof prop.yaxisTitleX==='number')x=prop.yaxisTitleX;if(typeof prop.yaxisTitleY==='number')y=prop.yaxisTitleY;RGraph.text({object:obj,textConfPrefix:'yaxisTitle',x:x,y:y,text:prop.yaxisTitle.toString(),valign:prop.yaxisTitleValign||'bottom',halign:prop.yaxisTitleHalign||'center',marker:false,accessible:false,angle:-45,angle:prop.yaxisPosition==='right'?90:-90,tag:'yaxis.title'});}};RGraph.isString=function(obj){return typeof obj==='string';};RGraph.isNumber=function(obj){return typeof obj==='number';};RGraph.isObject=function(obj){return typeof obj==='object'&&obj.constructor.toString().toLowerCase().indexOf('object')>0;};RGraph.isFunction=function(obj){return typeof obj==='function';};RGraph.isUndefined=function(obj){return typeof obj==='undefined';};})(window,document);window.$p=function(v)
{RGraph.pr(arguments[0],arguments[1],arguments[3]);};window.$a=function(v)
{alert(v);};window.$cl=function(v)
{return console.log(v);};window.$d=function(m)
{var width=600;var height=600;if(!this.rgraph_debug_textarea){this.rgraph_debug_textarea=document.createElement('textarea');this.rgraph_debug_textarea.style.position='absolute';this.rgraph_debug_textarea.style.left='10px';this.rgraph_debug_textarea.style.top='10px';this.rgraph_debug_textarea.style.width=width+'px';this.rgraph_debug_textarea.style.height=height+'px';this.rgraph_debug_textarea.style.opacity='0.75';this.rgraph_debug_textarea.style.zIndex='99999';this.rgraph_debug_textarea.style.border='2px solid black';this.rgraph_debug_textarea.style.backgroundColor='yellow'
this.rgraph_debug_textarea.style.color='black';this.rgraph_debug_textarea.style.fontSize='16pt';this.rgraph_debug_textarea.style.fontWeight='bold';this.rgraph_debug_textarea.wrap='off';document.body.appendChild(this.rgraph_debug_textarea);if(window.localStorage.rgraph_debug_textarea_x)this.rgraph_debug_textarea.style.left=window.localStorage.rgraph_debug_textarea_x;if(window.localStorage.rgraph_debug_textarea_y)this.rgraph_debug_textarea.style.top=window.localStorage.rgraph_debug_textarea_y;if(window.localStorage.rgraph_debug_textarea_w)this.rgraph_debug_textarea.style.width=window.localStorage.rgraph_debug_textarea_w;if(window.localStorage.rgraph_debug_textarea_h)this.rgraph_debug_textarea.style.height=window.localStorage.rgraph_debug_textarea_h;this.rgraph_debug_textarea.onmouseover=function(e){setTimeout(function(){e.target.style.opacity=1;},100)};this.rgraph_debug_textarea.onmousedown=function(e){if(e.ctrlKey){e.preventDefault();e.stopPropagation();this.mousedown=true;this.pickupX=e.offsetX;this.pickupY=e.offsetY;return false;}};this.rgraph_debug_textarea.ondblclick=function(e)
{if(confirm('Clear the log?')){this.value='';}};window.onmouseup=function(e){this.rgraph_debug_textarea.mousedown=false;};window.addEventListener('mousemove',function(e)
{var mouseX=e.pageX;var mouseY=e.pageY;if(this.rgraph_debug_textarea.mousedown){this.rgraph_debug_textarea.style.top=mouseY-this.rgraph_debug_textarea.pickupY+'px';this.rgraph_debug_textarea.style.left=mouseX-this.rgraph_debug_textarea.pickupX+'px';var saveCoordinates=function()
{window.localStorage.rgraph_debug_textarea_x=this.rgraph_debug_textarea.style.left;window.localStorage.rgraph_debug_textarea_y=this.rgraph_debug_textarea.style.top;window.localStorage.rgraph_debug_textarea_w=this.rgraph_debug_textarea.offsetWidth+'px';window.localStorage.rgraph_debug_textarea_h=this.rgraph_debug_textarea.offsetHeight+'px';};setInterval(saveCoordinates,1000);}},false)}
var date=new Date();var hour=date.getHours();var min=date.getMinutes();min=String(min).length===1?'0'+min:min;var sec=date.getSeconds();sec=String(sec).length===1?'0'+sec:sec;function getCircularReplacer()
{var seen=[];return function(key,value)
{if(typeof value==='object'&&value!==null){for(var i=0;i<seen.length;++i){if(seen[i]===value){return;}}
seen.push(value);}
return value;};};this.rgraph_debug_textarea.value="[%1:%2:%3] %4\r\n\r\n%5".format(hour,min,sec,JSON.stringify(m,getCircularReplacer()),this.rgraph_debug_textarea.value);};String.prototype.format=function()
{var args=arguments;for(var i in args){if(RGraph.isNull(args[i])){args[i]='null';}}
var s=this.replace(/{(\d+)}/g,function(str,idx)
{return typeof args[idx-1]!=='undefined'?args[idx-1]:str;});s=s.replace(/(?:%|\\)%(\d)/g,'__PPEERRCCEENNTT__$1');s=s.replace(/%(\d+)/g,function(str,idx)
{return typeof args[idx-1]!=='undefined'?args[idx-1]:str;});return s.replace('__PPEERRCCEENNTT__','%');};