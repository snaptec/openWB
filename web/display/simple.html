<html>
	<?php include ("display/gaugevalues.php"); ?>
<script src="/openWB/web/display/gauge.min.js"></script>
	<script type = "text/javascript" src = "/openWB/web/js/mqttws31.js" ></script>
      <link rel="stylesheet" href="/openWB/web/display/arrow.css">
      <link rel="stylesheet" href="/openWB/web/display/pin.css">
<?php 
			     if ( $displaytagesgraphold == "1\n") {
     echo ' <script src="js/core.js"></script>
	<script src="js/charts.js"></script>';
	} ?>
<input hidden name="" id="displayevumax" value="<?php echo $displayevumaxold ; ?>" />
<input hidden name="" id="displaypvmax" value="<?php echo $displaypvmaxold ; ?>" />
<input hidden name="" id="displayspeichermax" value="<?php echo $displayspeichermaxold ; ?>" />
<input hidden name="" id="displayhausanzeigen" value="<?php echo $displayhausanzeigenold ; ?>" />
<input hidden name="" id="displayhausmax" value="<?php echo $displayhausmaxold ; ?>" />
<input hidden name="" id="displaylp1max" value="<?php echo $displaylp1maxold ; ?>" />
<input hidden name="" id="displaylp2max" value="<?php echo $displaylp2maxold ; ?>" />
<input hidden name="" id="displaypinaktiv" value="<?php echo $displaypinaktivold ; ?>" />
<input hidden name="" id="displaypincode" value="<?php echo $displaypincodeold ; ?>" />

<div id="main">
<div style="font-size: 18px; height: 20px; top: 0px; left: 740px; text-align:center; position: absolute; width: 65px; color: white;" id="theclock"></div>
<div style="color: white; top: 0px; left: 10px; position: absolute; font-size: 18px; width: 810px;">

<div class="row col-xs-12 text-center" style="height: 120px;">
		<div class="col-xs-2">
				    <img src="img/icons/electric-tower.svg" style="filter: invert(1); -webkit-filter: invert(1);" width="40vw" >
		</div>

		<div class="col-xs-3">
				<div id="speedevu">
					<div id="arrowevu"></div>
 				</div>
				<span id="bezugdiv"></span>
		</div>
	
		<div class="col-xs-2">
			<i class="fas fa-2x fa-home swhite" style="color: white;"></i><br><span id="hausverbrauchdiv">	

		</div>
			<i class="fas fa-2x fa-solar-panel" style="color: green;"></i>
			<br>
			<span id="pvdiv"></span>

</div>


<div class="row col-xs-12 text-center" style="height: 70px;">
		<div class="col-xs-2">

			<span id="lp1enableddiv" class="fa fa-2x" style="cursor: pointer;" onclick="lp1enabledclick()"></span><span id="stationlp1" class="fas fa-2x fa-charging-station"></span>
		</div>

		<div class="col-xs-3">
				<div id="speedlp1">
					<div id="arrowlp1"></div>
 				</div>
			<span id="lldiv"></span> <span id="pluggedladungbishergeladendiv"></span>kWh
		</div>

		<div class="col-xs-1">
			<i id="carlp1" class="fas fa-2x fa-car-side"></i><br><span id="lp1name"></span>
		</div>
		<div class="col-xs-2">
			<span id="lp2enableddiv" class="fa fa-2x" style="cursor: pointer;" onclick="lp2enabledclick()"></span><span id="stationlp2" class="fas fa-2x fa-charging-station"></span>	
		</div>

		<div class="col-xs-3">
				<div id="speedlp2">
					<div id="arrowlp2"></div>
 				</div>
			<span id="lllp2div"></span> <span id="pluggedladungbishergeladenlp2div"></span>kWh
		</div>

		<div class="col-xs-1">
			<i id="carlp2" class="fas fa-2x fa-car-side"></i><br><span id="lp2name"></span>

		</div>
</div>
<div class="row col-xs-12 text-center" style="height: 70px;">
	<div id="lp3div">
		<div class="col-xs-2">

			<span id="lp3enableddiv" class="fa fa-2x" style="cursor: pointer;" onclick="lp3enabledclick()"></span><span id="stationlp3" class="fas fa-2x fa-charging-station"></span>
		</div>

		<div class="col-xs-3">
				<div id="speedlp3">
					<div id="arrowlp3"></div>
 				</div>
			<span id="lllp3div"></span> <span id="pluggedladungbishergeladenlp3div"></span>kWh

		</div>

		<div class="col-xs-1">
			<i id="carlp3" class="fas fa-2x fa-car-side"></i><br><span id="lp3name"></span>
		</div>
	</div>
	<div id="lp4div">

		<div class="col-xs-2">
			<span id="lp4enableddiv" class="fa fa-2x" style="cursor: pointer;" onclick="lp4enabledclick()"></span><span id="stationlp4" class="fas fa-2x fa-charging-station"></span>	
		</div>

		<div class="col-xs-3">
				<div id="speedlp4">
					<div id="arrowlp4"></div>
 				</div>
			<span id="lllp4div"></span> <span id="pluggedladungbishergeladenlp4div"></span>kWh

		</div>

		<div class="col-xs-1">
			<i id="carlp4" class="fas fa-2x fa-car-side"></i><br><span id="lp4name"></span>

		</div>
	</div>
</div>

<div class="row col-xs-12 text-center" style="height: 70px;">
	<div id="lp5div">
		<div class="col-xs-2">

			<span id="lp5enableddiv" class="fa fa-2x" style="cursor: pointer;" onclick="lp5enabledclick()"></span><span id="stationlp5" class="fas fa-2x fa-charging-station"></span>
		</div>

		<div class="col-xs-3">
				<div id="speedlp5">
					<div id="arrowlp5"></div>
 				</div>
			<span id="lllp5div"></span> <span id="pluggedladungbishergeladenlp5div"></span>kWh

		</div>

		<div class="col-xs-1">
			<i id="carlp5" class="fas fa-2x fa-car-side"></i><br><span id="lp5name"></span>
		</div>
	</div>
	<div id="lp6div">

		<div class="col-xs-2">
			<span id="lp6enableddiv" class="fa fa-2x" style="cursor: pointer;" onclick="lp6enabledclick()"></span><span id="stationlp6" class="fas fa-2x fa-charging-station"></span>	
		</div>

		<div class="col-xs-3">
				<div id="speedlp6">
					<div id="arrowlp6"></div>
 				</div>
			<span id="lllp6div"></span> <span id="pluggedladungbishergeladenlp6div"></span>kWh

		</div>

		<div class="col-xs-1">
			<i id="carlp6" class="fas fa-2x fa-car-side"></i><br><span id="lp6name"></span>

		</div>
	</div>
</div>
<div class="row col-xs-12 text-center" style="height: 70px;">
	<div id="lp7div">
		<div class="col-xs-2">

			<span id="lp7enableddiv" class="fa fa-2x" style="cursor: pointer;" onclick="lp7enabledclick()"></span><span id="stationlp7" class="fas fa-2x fa-charging-station"></span>
		</div>

		<div class="col-xs-3">
				<div id="speedlp7">
					<div id="arrowlp7"></div>
 				</div>
			<span id="lllp7div"></span> <span id="pluggedladungbishergeladenlp7div"></span>kWh

		</div>

		<div class="col-xs-1">
			<i id="carlp7" class="fas fa-2x fa-car-side"></i><br><span id="lp7name"></span>
		</div>
	</div>
	<div id="lp8div">

		<div class="col-xs-2">
			<span id="lp8enableddiv" class="fa fa-2x" style="cursor: pointer;" onclick="lp8enabledclick()"></span><span id="stationlp8" class="fas fa-2x fa-charging-station"></span>	
		</div>

		<div class="col-xs-3">
				<div id="speedlp8">
					<div id="arrowlp8"></div>
 				</div>
			<span id="lllp8div"></span> <span id="pluggedladungbishergeladenlp8div"></span>kWh

		</div>

		<div class="col-xs-1">
			<i id="carlp8" class="fas fa-2x fa-car-side"></i><br><span id="lp8name"></span>

		</div>
	</div>
</div>




</div>

<div class="row col-xs-12 text-center" style="font-size: 15px; height: 20px; top: 320px; left: 0px; position: absolute; width: 820px; color: white; text-align:center;"> 




        <div class="row"> 
	        <div id="lastregelungaktivdiv" class="col-xs-12 text-center" style="color:#990000;font-size: 30px"> 
                </div> 
        </div> 														 
</div>
<div class="row col-xs-12 text-center" style="font-size: 15px; height: 15px; top: 410px; left: 40px; position: absolute; width: 800px; color: white; text-align:center;"> 

    
         <div class=" col-xs-1"> 

                </div> 
		<div class="col-xs-2">
			<div id="sofortllbtn">
				<input type="submit" class="1sofortll btn btn-blue"  name="sofortllbtn" value="Ladestrom">
			</div>
		</div>
		<div class="col-xs-2">
		</div>
		<div class="col-xs-2">
		</div>

        <div class=" col-xs-2"> 
		
                </div> 
		<div class="col-xs-1">

		</div>
</div>

</div>
<div id="sofortll">
		<div class="col-xs-12 text-center" style="font-size: 22px; height: 10px; top: 10px; left: 10px; position: absolute; width: 750px; color: white; text-align:left;">
	
	<div id="slider1div" class="col-xs-12 text-center">

			<div class="col-xs-8 text-center">
				<input type="range" min=<?php echo $minimalstromstaerkeold ?> max=<?php echo $maximalstromstaerkeold ?> step="1" name="sofortlllp1s" id="sofortlllp1s">
				
			</div>
			<div class="col-xs-4 text-center">
				<label for="sofortlllp1">LP 1: <span id="sofortlllp1l"></span>A</label>  <span class="fa fa-save" style="cursor: pointer;" onclick="lp1DirectChargeAmpsClick()"></span>
			</div>
			<script>
				var slider1 = document.getElementById("sofortlllp1s");
				var output1 = document.getElementById("sofortlllp1l");
				output1.innerHTML = slider1.value;
				slider1.oninput = function() {
					output1.innerHTML = this.value;
				}
			</script>
		</div>
		<div id="slider2div" class="col-xs-12 text-center">

			<div class="col-xs-8 text-center">
				<input type="range" min=<?php echo $minimalstromstaerkeold ?> max=<?php echo $maximalstromstaerkeold ?> step="1" name="sofortlllp2s" id="sofortlllp2s">
				
			</div>
			<div class="col-xs-4 text-center">
				<label for="sofortlllp2">LP 2: <span id="sofortlllp2l"></span>A</label>  <span class="fa fa-save" style="cursor: pointer;" onclick="lp2DirectChargeAmpsClick()"></span>
			</div>
			<script>
				var slider2 = document.getElementById("sofortlllp2s");
				var output2 = document.getElementById("sofortlllp2l");
				output2.innerHTML = slider2.value;
				slider2.oninput = function() {
					output2.innerHTML = this.value;
				}
			</script>
		</div>
		<div id="slider3div" class="col-xs-12 text-center">

			<div class="col-xs-8 text-center">
				<input type="range" min=<?php echo $minimalstromstaerkeold ?> max=<?php echo $maximalstromstaerkeold ?> step="1" name="sofortlllp3s" id="sofortlllp3s">
				
			</div>
			<div class="col-xs-4 text-center">
				<label for="sofortlllp3">LP 3: <span id="sofortlllp3l"></span>A</label>  <span class="fa fa-save" style="cursor: pointer;" onclick="lp3DirectChargeAmpsClick()"></span>
			</div>
			<script>
				var slider3 = document.getElementById("sofortlllp3s");
				var output3 = document.getElementById("sofortlllp3l");
				output3.innerHTML = slider3.value;
				slider3.oninput = function() {
					output3.innerHTML = this.value;
				}
			</script>
		</div>
		<div id="slider4div" class="col-xs-12 text-center">

			<div class="col-xs-8 text-center">
				<input type="range" min=<?php echo $minimalstromstaerkeold ?> max=<?php echo $maximalstromstaerkeold ?> step="1" name="sofortlllp4s" id="sofortlllp4s">
				
			</div>
			<div class="col-xs-4 text-center">
				<label for="sofortlllp4">LP 4: <span id="sofortlllp4l"></span>A</label>  <span class="fa fa-save" style="cursor: pointer;" onclick="lp4DirectChargeAmpsClick()"></span>
			</div>
			<script>
				var slider4 = document.getElementById("sofortlllp4s");
				var output4 = document.getElementById("sofortlllp4l");
				output4.innerHTML = slider4.value;
				slider4.oninput = function() {
					output4.innerHTML = this.value;
				}
			</script>
		</div>
		<div id="slider5div" class="col-xs-12 text-center">
			<div class="col-xs-8 text-center">
				<input type="range" min=<?php echo $minimalstromstaerkeold ?> max=<?php echo $maximalstromstaerkeold ?> step="1" name="sofortlllp5s" id="sofortlllp5s">
				
			</div>
			<div class="col-xs-4 text-center">
				<label for="sofortlllp5">LP 5: <span id="sofortlllp5l"></span>A</label>  <span class="fa fa-save" style="cursor: pointer;" onclick="lp5DirectChargeAmpsClick()"></span>
			</div>
			<script>
				var slider5 = document.getElementById("sofortlllp5s");
				var output5 = document.getElementById("sofortlllp5l");
				output5.innerHTML = slider5.value;
				slider5.oninput = function() {
					output5.innerHTML = this.value;
				}
			</script>
		</div>

		<div id="slider6div" class="col-xs-12 text-center">

			<div class="col-xs-8 text-center">
				<input type="range" min=<?php echo $minimalstromstaerkeold ?> max=<?php echo $maximalstromstaerkeold ?> step="1" name="sofortlllp6s" id="sofortlllp6s">
				
			</div>
			<div class="col-xs-4 text-center">
				<label for="sofortlllp6">LP 6: <span id="sofortlllp6l"></span>A</label>  <span class="fa fa-save" style="cursor: pointer;" onclick="lp6DirectChargeAmpsClick()"></span>
			</div>
			<script>
				var slider6 = document.getElementById("sofortlllp6s");
				var output6 = document.getElementById("sofortlllp6l");
				output6.innerHTML = slider6.value;
				slider6.oninput = function() {
					output6.innerHTML = this.value;
				}
			</script>
		</div>
		<div id="slider7div" class="col-xs-12 text-center">

			<div class="col-xs-8 text-center">
				<input type="range" min=<?php echo $minimalstromstaerkeold ?> max=<?php echo $maximalstromstaerkeold ?> step="1" name="sofortlllp7s" id="sofortlllp7s">
				
			</div>
			<div class="col-xs-4 text-center">
				<label for="sofortlllp7">LP 7: <span id="sofortlllp7l"></span>A</label>  <span class="fa fa-save" style="cursor: pointer;" onclick="lp7DirectChargeAmpsClick()"></span>
			</div>
			<script>
				var slider7 = document.getElementById("sofortlllp7s");
				var output7 = document.getElementById("sofortlllp7l");
				output7.innerHTML = slider7.value;
				slider7.oninput = function() {
					output7.innerHTML = this.value;
				}
			</script>
		</div>
		<div id="slider8div" class="col-xs-12 text-center">

			<div class="col-xs-8 text-center">
				<input type="range" min=<?php echo $minimalstromstaerkeold ?> max=<?php echo $maximalstromstaerkeold ?> step="1" name="sofortlllp8s" id="sofortlllp8s">
				
			</div>
			<div class="col-xs-4 text-center">
				<label for="sofortlllp8">LP 8: <span id="sofortlllp8l"></span>A</label>  <span class="fa fa-save" style="cursor: pointer;" onclick="lp8DirectChargeAmpsClick()"></span>
			</div>
			<script>
				var slider8 = document.getElementById("sofortlllp8s");
				var output8 = document.getElementById("sofortlllp8l");
				output8.innerHTML = slider8.value;
				slider8.oninput = function() {
					output8.innerHTML = this.value;
				}
			</script>
		</div>
</div>
	<div class="row col-xs-12 text-center" style="font-size: 12px; height: 10px; top: 430px; left: 50px; position: absolute; width: 750px; color: white; text-align:center;"> 

	    <div class=" col-xs-8">
</div>

        <div class=" col-xs-4"> 
		<input type="submit" class="1zurueck btn-blue btn btn-block" style="height: 20px; line-height: 5px !important;" name="zurueck" value="ZurÃ¼ck">
                </div> 
</div>




<div id="pin">
  <div class="dots">
    <div class="dot"></div>
    <div class="dot"></div>
    <div class="dot"></div>
    <div class="dot"></div>
  </div>
  <p>PIN</p>
  <div class="numbers">
    <div class="number">1</div>
    <div class="number">2</div>
    <div class="number">3</div>
    <div class="number">4</div>
    <div class="number">5</div>
    <div class="number">6</div>
    <div class="number">7</div>
    <div class="number">8</div>
    <div class="number">9</div>
  </div>
</div>


<script>
function startTime() {
	var today = new Date();
	var h = today.getHours();
	var m = today.getMinutes();
	m = checkTime(m);
	document.getElementById('theclock').innerHTML =
	h + ":" + m;
	var t = setTimeout(startTime, 5000);
}
function checkTime(i) {
	    if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
	        return i;
}
startTime();
	 $('#pin').hide();
	var displayhausmax = <?php echo $displayhausmaxold ?>;
	var displaylp2max = <?php echo $displaylp2maxold ?>;
	var displaylp1max = <?php echo $displaylp1maxold ?>;
	var displaypvmax = <?php echo $displaypvmaxold ?>;
	var displayevumax = <?php echo $displayevumaxold ?>;
	var displayspeichermax = <?php echo $displayspeichermaxold ?>;
	var displayhausanzeigen = <?php echo $displayhausanzeigenold ?>;
	var displaypincode = <?php echo $displaypincodeold ?>;
	var displaypinaktiv = <?php echo $displaypinaktivold ?>;
	var lastmanagementold = <?php echo $lastmanagementold ?>;
	if ( displayhausanzeigen == '1') {
        $('#hausanzeigen').show();
    } else {
        $('#hausanzeigen').hide();

    }
    if ( lastmanagementold == '1') {
        $('#lp2anzeigen').show();
    } else {
        $('#lp2anzeigen').hide();

    }

var dash = 1;


var displaylock = 1;

	function execnurpv(){
	    var ajaxurl = 'tools/changelademodusd.php?pvuberschuss=1';
	    $.post(ajaxurl, 'nurpv', function (response) {
                $('.actstat2 .btn').addClass("btn-green");
                $('.actstat3 .btn').addClass("btn-red");
                $('.actstat .btn').addClass("btn-red");
                $('.actstat1 .btn').addClass("btn-red");
                $('.actstat .btn').removeClass("btn-green");
                $('.actstat2 .btn').removeClass("btn-red");
                $('.actstat3 .btn').removeClass("btn-green");
                $('.actstat1 .btn').removeClass("btn-green");
                $('.actstat4 .btn').addClass("btn-red");
                $('.actstat4 .btn').removeClass("btn-green");
   		$('#sofortllbtn').hide();
	    });
	}

	function execminpv(){
	    var ajaxurl = 'tools/changelademodusd.php?minundpv=1';
	    $.post(ajaxurl, 'minpv', function (response) {
                $('.actstat2 .btn').addClass("btn-red");
                $('.actstat3 .btn').addClass("btn-red");
                $('.actstat .btn').addClass("btn-red");
                $('.actstat1 .btn').addClass("btn-green");
                $('.actstat .btn').removeClass("btn-green");
                $('.actstat2 .btn').removeClass("btn-green");
                $('.actstat3 .btn').removeClass("btn-green");
                $('.actstat1 .btn').removeClass("btn-red");
                $('.actstat4 .btn').addClass("btn-red");
                $('.actstat4 .btn').removeClass("btn-green");
   		$('#sofortllbtn').hide();

	    });
	}

	function execstop(){
	    var ajaxurl = 'tools/changelademodusd.php?stop=1';
	    $.post(ajaxurl, 'stop', function (response) {
                $('.actstat2 .btn').addClass("btn-red");
                $('.actstat3 .btn').addClass("btn-green");
                $('.actstat .btn').addClass("btn-red");
                $('.actstat1 .btn').addClass("btn-red");
                $('.actstat .btn').removeClass("btn-green");
                $('.actstat2 .btn').removeClass("btn-green");
                $('.actstat3 .btn').removeClass("btn-red");
                $('.actstat1 .btn').removeClass("btn-green");
                $('.actstat4 .btn').addClass("btn-red");
                $('.actstat4 .btn').removeClass("btn-green");
   		$('#sofortllbtn').hide();

	    });
	}


	function execstandby(){
	    var ajaxurl = 'tools/changelademodusd.php?semistop=1';
	    $.post(ajaxurl, 'standby', function (response) {
                $('.actstat2 .btn').addClass("btn-red");
                $('.actstat3 .btn').addClass("btn-red");
                $('.actstat .btn').addClass("btn-red");
                $('.actstat1 .btn').addClass("btn-red");
                $('.actstat .btn').removeClass("btn-green");
                $('.actstat2 .btn').removeClass("btn-green");
                $('.actstat3 .btn').removeClass("btn-green");
                $('.actstat1 .btn').removeClass("btn-green");
                $('.actstat4 .btn').addClass("btn-green");
                $('.actstat4 .btn').removeClass("btn-red");
   		$('#sofortllbtn').hide();


	    });
	}
	function execsofort(){
	    var ajaxurl = 'tools/changelademodusd.php?jetzt=1';
	    $.post(ajaxurl, 'sofort', function (response) {
                $('.actstat2 .btn').addClass("btn-red");
                $('.actstat3 .btn').addClass("btn-red");
                $('.actstat .btn').addClass("btn-green");
                $('.actstat1 .btn').addClass("btn-red");
                $('.actstat .btn').removeClass("btn-red");
                $('.actstat2 .btn').removeClass("btn-green");
                $('.actstat3 .btn').removeClass("btn-green");
                $('.actstat1 .btn').removeClass("btn-green");
                $('.actstat4 .btn').addClass("btn-red");
                $('.actstat4 .btn').removeClass("btn-green");
   		$('#sofortllbtn').show();

	    });
	}

//setInterval(function(){gauge.set(wattbezug)}, 200)
	</script>


  <script>
	var displaytheme = <?php echo $displaythemeold ?>;
$('#gaugediv').hide();
$('#symboldiv').hide();

		$('#dergraph').hide();
		$('#einstellungen').hide();
		$('#sofortll').hide();
		$('#sofortllbtn').show();
		if ( displaytheme == 0 ) {
	   	$('#gaugediv').show();
		}
		if ( displaytheme == 1 ) {
	   	$('#symboldiv').show();
		}

var stop = 0;
var sofort = 0;
var standby = 0;
var nurpv = 0;
var minpv = 0;
var lock = 0;
$(document).ready(function(){

   $('.1einstellungen').click(function(){

		$('#main').hide();
		dash = 0;
	//	execgraph();

       
	       	$('#einstellungen').show();
		$('#status').show();
		$('#hilfe').hide();
       	   });
   $('.1graph').click(function(){

		$('#main').hide();
		dash = 0;
	//	execgraph();

       
	       	$('#dergraph').show();
       	   });
   $('.1sofortll').click(function(){
		var llsolllp1;
		$('#main').hide();
		dash = 0;
		$('#sofortll').show();




       	   });

   $('.1zurueck').click(function(){
		dash = 1;
	$('#dergraph').hide();
	$('#einstellungen').hide();
	$('#sofortll').hide();
	$('#main').show();
});
   $('.1hilfe').click(function(){
		dash = 1;
	$('#dergraph').hide();
	$('#einstellungen').show();
	$('#sofortll').hide();
	$('#main').hide();
	$('#hilfe').show();
	$('#status').hide();

});
   $('.1stop').click(function(){
	   if ( lock == 0 ) {
		if ( displaypinaktiv == 1){
			$('#pin').show();
			lock = 1;
	   	        stop = 1;
		} else {
			execstop();
		}
	   }
});
   $('.1sofort').click(function(){
	   if ( lock == 0 ) {
	   if ( displaypinaktiv == 1){
	   	$('#pin').show();
		lock = 1;
	        sofort = 1;
		} else {
			execsofort();
		}
	   }
});
   $('.1standby').click(function(){
	   if ( lock == 0 ) {
	   if ( displaypinaktiv == 1){
	   	$('#pin').show();
		lock = 1;
                standby = 1;
	   } else {
		execstandby();
	   }
	   }
});
   $('.1nurpv').click(function(){
	   if ( lock == 0 ) {
		if ( displaypinaktiv == 1){
   		   lock = 1;
	   	nurpv = 1;
		$('#pin').show();
		} else {
			execnurpv();
		}
	   }
});
   $('.1minpv').click(function(){
	   if ( lock == 0 ) {
		if ( displaypinaktiv == 1){
			lock = 1;
	   		minpv = 1;
			$('#pin').show();
		
		} else {
			execminpv();
		}
	   }
	   });

});
(function () {
  var input = '',
  correct = displaypincode.toString().substr(0, 4);

  var dots = document.getElementsByClassName('dot'),
  numbers = document.getElementsByClassName('number');
  dots = Array.from(dots);
  numbers = Array.from(numbers);

  var numbersBox = document.getElementsByClassName('numbers')[0];
  $(numbersBox).on('click', '.number', function (evt) {
    var number = $(this);

    input += number.index() + 1;
    $(dots[input.length - 1]).addClass('active');

    if (input.length >= 4) {
      if (input !== correct) {
        dots.forEach(dot => $(dot).addClass('wrong'));
	$(document.body).addClass('wrong');
        setTimeout(function(){  
	        $('#pin').hide(); 
        }, 1400);
	lock = 0;
      } else
      {
        dots.forEach(dot => $(dot).addClass('correct'));
        $(document.body).addClass('correct');
	if ( stop == 1 ) {
		stop = 0;
		execstop();
	}
	if ( sofort == 1 ) {
		sofort = 0;
		execsofort();

	}
	if ( standby == 1 ) {
		standby = 0;
		execstandby();
	}
	if ( nurpv == 1 ) {
		nurpv = 0;
		execnurpv();
	}
	if ( minpv == 1 ) {
		minpv = 0;
		execminpv();
	}
	setTimeout(function(){  
	        $('#pin').hide(); 
        }, 1400);
	lock = 0;
      }
      setTimeout(function () {
        dots.forEach(dot => dot.className = 'dot');
        input = '';
      }, 900);
      setTimeout(function () {
        document.body.className = '';
      }, 1000);
    }
    setTimeout(function () {
      number.className = 'number';
    }, 1000);
  });
})();
  </script>
   <script>
function reldisp() {
$.ajax({
    url: "/openWB/ramdisk/reloaddisplay",
    complete: function(request){
		if (request.responseText == 1) {
			    $.ajax({
        url:"./tools/reloaddisplay.php",
        type: "post", 
        success:function(result){
                    location.reload();	}
	    });        
		}    
    }
  });
}
do3Interval = setInterval(reldisp,2000);
reldisp();
//function execgraph() {
//	if ( dash == 0 ){
	var lastmanagements2 = <?php echo $lastmanagements2old ?>;
	var lastmanagement = <?php echo $lastmanagementold ?>;
	var soc1vorhanden = <?php echo $soc1vorhanden ?>;
	var speichervorhanden = <?php echo $speichervorhanden ?>;


   </script>

</body>
<!-- <script src="/openWB/web/display/alllive.js"></script> -->
<!-- <script src="./display/symbollive.js"></script> -->
<script src="/openWB/web/live.js"></script>


</html>
